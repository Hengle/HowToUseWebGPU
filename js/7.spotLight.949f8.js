!function(e){function t(t){for(var r,i,o=t[0],a=t[1],s=t[2],c=0,u=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(B,i)&&B[i]&&u.push(B[i][0]),B[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(C&&C(t);u.length;)u.shift()();return G.push.apply(G,s||[]),n()}function n(){for(var e,t=0;t<G.length;t++){for(var n=G[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==B[o]&&(r=!1)}r&&(G.splice(t--,1),e=j(j.s=n[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!x[e]||!P[e])return;for(var n in P[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n]);0==--y&&0===b&&O()}(e,t),r&&r(e,t)};var i,o=!0,a="949f8f05e8a244ea7a66",s={},c=[],u=[];function d(t){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:i!==t,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)n._acceptedDependencies[e[r]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,f){case"idle":(v={})[t]=e[t],p("ready");break;case"ready":D(t);break;case"prepare":case"check":case"dispose":case"apply":(m=m||[]).push(t)}},check:_,apply:U,status:function(e){if(!e)return f;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var t=l.indexOf(e);t>=0&&l.splice(t,1)},data:s[t]};return i=void 0,n}var l=[],f="idle";function p(e){f=e;for(var t=0;t<l.length;t++)l[t].call(null,e)}var h,v,g,m,y=0,b=0,w={},P={},x={};function E(e){return+e+""===e?+e:e}function _(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return o=e,p("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=j.p+""+a+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return p(T()?"ready":"idle"),null;P={},w={},x=e.c,g=e.h,p("prepare");var t=new Promise((function(e,t){h={resolve:e,reject:t}}));for(var n in v={},B)S(n);return"prepare"===f&&0===b&&0===y&&O(),t}));var t}function S(e){x[e]?(P[e]=!0,y++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=j.p+""+e+"."+a+".hot-update.js",document.head.appendChild(t)}(e)):w[e]=!0}function O(){p("ready");var e=h;if(h=null,e)if(o)Promise.resolve().then((function(){return U(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in v)Object.prototype.hasOwnProperty.call(v,n)&&t.push(E(n));e.resolve(t)}}function U(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");return function t(n){var r,o,u,d,l;function f(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),o=i.id,a=i.chain;if((d=M[o])&&(!d.hot._selfAccepted||d.hot._selfInvalidated)){if(d.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(d.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var s=0;s<d.parents.length;s++){var c=d.parents[s],u=M[c];if(u){if(u.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([c]),moduleId:o,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[o]?(n[c]||(n[c]=[]),h(n[c],[o])):(delete n[c],t.push(c),r.push({chain:a.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}T();var y={},b=[],w={},P=function(){console.warn("[HMR] unexpected require("+S.moduleId+") to disposed module")};for(var _ in v)if(Object.prototype.hasOwnProperty.call(v,_)){var S;l=E(_),S=v[_]?f(l):{type:"disposed",moduleId:_};var O=!1,U=!1,D=!1,G="";switch(S.chain&&(G="\nUpdate propagation: "+S.chain.join(" -> ")),S.type){case"self-declined":n.onDeclined&&n.onDeclined(S),n.ignoreDeclined||(O=new Error("Aborted because of self decline: "+S.moduleId+G));break;case"declined":n.onDeclined&&n.onDeclined(S),n.ignoreDeclined||(O=new Error("Aborted because of declined dependency: "+S.moduleId+" in "+S.parentId+G));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(S),n.ignoreUnaccepted||(O=new Error("Aborted because "+l+" is not accepted"+G));break;case"accepted":n.onAccepted&&n.onAccepted(S),U=!0;break;case"disposed":n.onDisposed&&n.onDisposed(S),D=!0;break;default:throw new Error("Unexception type "+S.type)}if(O)return p("abort"),Promise.reject(O);if(U)for(l in w[l]=v[l],h(b,S.outdatedModules),S.outdatedDependencies)Object.prototype.hasOwnProperty.call(S.outdatedDependencies,l)&&(y[l]||(y[l]=[]),h(y[l],S.outdatedDependencies[l]));D&&(h(b,[S.moduleId]),w[l]=P)}var L,I=[];for(o=0;o<b.length;o++)l=b[o],M[l]&&M[l].hot._selfAccepted&&w[l]!==P&&!M[l].hot._selfInvalidated&&I.push({module:l,parents:M[l].parents.slice(),errorHandler:M[l].hot._selfAccepted});p("dispose"),Object.keys(x).forEach((function(e){!1===x[e]&&function(e){delete B[e]}(e)}));var A,C,k=b.slice();for(;k.length>0;)if(l=k.pop(),d=M[l]){var H={},R=d.hot._disposeHandlers;for(u=0;u<R.length;u++)(r=R[u])(H);for(s[l]=H,d.hot.active=!1,delete M[l],delete y[l],u=0;u<d.children.length;u++){var V=M[d.children[u]];V&&((L=V.parents.indexOf(l))>=0&&V.parents.splice(L,1))}}for(l in y)if(Object.prototype.hasOwnProperty.call(y,l)&&(d=M[l]))for(C=y[l],u=0;u<C.length;u++)A=C[u],(L=d.children.indexOf(A))>=0&&d.children.splice(L,1);p("apply"),void 0!==g&&(a=g,g=void 0);for(l in v=void 0,w)Object.prototype.hasOwnProperty.call(w,l)&&(e[l]=w[l]);var F=null;for(l in y)if(Object.prototype.hasOwnProperty.call(y,l)&&(d=M[l])){C=y[l];var z=[];for(o=0;o<C.length;o++)if(A=C[o],r=d.hot._acceptedDependencies[A]){if(-1!==z.indexOf(r))continue;z.push(r)}for(o=0;o<z.length;o++){r=z[o];try{r(C)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:l,dependencyId:C[o],error:e}),n.ignoreErrored||F||(F=e)}}}for(o=0;o<I.length;o++){var N=I[o];l=N.module,c=N.parents,i=l;try{j(l)}catch(e){if("function"==typeof N.errorHandler)try{N.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:t,originalError:e}),n.ignoreErrored||F||(F=t),F||(F=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:l,error:e}),n.ignoreErrored||F||(F=e)}}if(F)return p("fail"),Promise.reject(F);if(m)return t(n).then((function(e){return b.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return p("idle"),new Promise((function(e){e(b)}))}(t=t||{})}function T(){if(m)return v||(v={}),m.forEach(D),m=void 0,!0}function D(t){Object.prototype.hasOwnProperty.call(v,t)||(v[t]=e[t])}var M={},B={7:0},G=[];function j(t){if(M[t])return M[t].exports;var n=M[t]={i:t,l:!1,exports:{},hot:d(t),parents:(u=c,c=[],u),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=M[e];if(!t)return j;var n=function(n){return t.hot.active?(M[n]?-1===M[n].parents.indexOf(e)&&M[n].parents.push(e):(c=[e],i=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),c=[]),j(n)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return j[e]},set:function(t){j[e]=t}}};for(var o in j)Object.prototype.hasOwnProperty.call(j,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(n,o,r(o));return n.e=function(e){return"ready"===f&&p("prepare"),b++,j.e(e).then(t,(function(e){throw t(),e}));function t(){b--,"prepare"===f&&(w[e]||S(e),0===b&&0===y&&O())}},n.t=function(e,t){return 1&t&&(e=n(e)),j.t(e,-2&t)},n}(t)),n.l=!0,n.exports}j.m=e,j.c=M,j.d=function(e,t,n){j.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},j.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},j.t=function(e,t){if(1&t&&(e=j(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(j.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)j.d(n,r,function(t){return e[t]}.bind(null,r));return n},j.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return j.d(t,"a",t),t},j.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},j.p="",j.h=function(){return a};var L=window.webpackJsonp=window.webpackJsonp||[],I=L.push.bind(L);L.push=t,L=L.slice();for(var A=0;A<L.length;A++)t(L[A]);var C=I;G.push([23,0]),n()}({0:function(e,t,n){},1:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGPURenderEngin=void 0;var o=n(4),a=function(){function e(e){this.pipelines=[],this.clearColor={r:.25,g:.5,b:1,a:1},this.gpu=navigator.gpu,e instanceof HTMLCanvasElement?this.canvas=e:this.canvas=document.getElementById(e)}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),this.gpu?(e=this,[4,navigator.gpu.requestAdapter({powerPreference:"high-performance"})]):[3,5];case 1:return e.adapter=i.sent(),t=this,[4,this.adapter.requestDevice()];case 2:return t.device=i.sent(),this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight,this.context=this.canvas.getContext("gpupresent"),n=this,[4,this.context.getSwapChainPreferredFormat(this.device)];case 3:return n.swapChainTextureFormat=i.sent(),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.swapChainTextureFormat,usage:GPUTextureUsage.OUTPUT_ATTACHMENT|GPUTextureUsage.COPY_SRC}),r=this,[4,o.default()];case 4:return r.glslang=i.sent(),this.depthTexture=this.device.createTexture({size:{width:this.canvas.width,height:this.canvas.height,depth:1},format:"depth24plus-stencil8",usage:GPUTextureUsage.OUTPUT_ATTACHMENT}),[2,!0];case 5:return[2,!1];case 6:return[3,8];case 7:return a=i.sent(),console.error(a),[2,!1];case 8:return[2]}}))}))},e.prototype.draw=function(e){this.commandEncoder=this.device.createCommandEncoder();var t={colorAttachments:[{attachment:this.swapChain.getCurrentTexture().createView(),loadValue:this.clearColor,storeOp:"store"}],depthStencilAttachment:{attachment:this.depthTexture.createView(),depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:0,stencilStoreOp:"store"}};this.renderPassEncoder=this.commandEncoder.beginRenderPass(t);var n=this.pipelines[0];this.renderPassEncoder.setPipeline(n.pipeline),this.renderPassEncoder.setBindGroup(0,n.uniformBindGroup),this.renderPassEncoder.setViewport(0,0,this.canvas.width,this.canvas.height,0,1),this.renderPassEncoder.setScissorRect(0,0,this.canvas.width,this.canvas.height);for(var r=0;r<n.attributes.length;r++){var i=n.attributes[r].buffer;this.renderPassEncoder.setVertexBuffer(r,i)}n.indexLength>0?(this.renderPassEncoder.setIndexBuffer(n.indexBuffer),this.renderPassEncoder.drawIndexed(n.indexLength,1,0,0,0)):this.renderPassEncoder.draw(e,1,0,0),this.renderPassEncoder.endPass(),this.device.defaultQueue.submit([this.commandEncoder.finish()])},e}();t.WebGPURenderEngin=a},2:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGPURenderPipeline=void 0;var o=n(3),a=function(){function e(e,t,n){var r=this;this.attributes=[],this.uniformEntries=new Map,this.engin=e,this.engin.pipelines.push(this),this.vs=t,this.fs=n,this.vertModule=this.engin.device.createShaderModule({code:this.engin.glslang.compileGLSL(t,"vertex",!0),source:t,transform:function(e){return r.engin.glslang.compileGLSL(e,"vertex",!0)}}),this.fragModule=this.engin.device.createShaderModule({code:this.engin.glslang.compileGLSL(n,"fragment",!0),source:n,transform:function(e){return r.engin.glslang.compileGLSL(e,"fragment",!0)}})}return e.prototype.createBuffer=function(e,t){var n={size:e.byteLength,usage:t},r=this.engin.device.createBufferMapped(n),i=r[0],o=r[1];return new e.constructor(o).set(e),i.unmap(),i},e.prototype.updateBuffer=function(e,t,n){this.engin.device.defaultQueue.writeBuffer(e,t,n,0,n.byteLength)},e.prototype.addAttribute=function(e,t){void 0===t&&(t=3);var n=this.createBuffer(e,GPUBufferUsage.VERTEX);this.attributes.push({buffer:n,componentSize:t})},e.prototype.setIndex=function(e){this.indexBuffer=this.createBuffer(e,GPUBufferUsage.INDEX),this.indexLength=e.length},e.prototype.addUniformEntry=function(e){this.uniformEntries.set(e.binding,e)},e.prototype.getUniformEntryByBinding=function(e){return this.uniformEntries.get(e)},e.prototype.addUniformBuffer=function(e,t){void 0===t&&(t=0);var n=this.createBuffer(e,GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST);this.addUniformEntry({binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,type:"uniform-buffer",resource:{buffer:n}})},e.prototype.addSampler=function(e,t,n){void 0===t&&(t="linear"),void 0===n&&(n="linear");var r=this.engin.device.createSampler({magFilter:t,minFilter:n,maxAnisotropy:4});this.addUniformEntry({binding:e,visibility:GPUShaderStage.FRAGMENT,type:"sampler",resource:r})},e.prototype.addTextureView=function(e,t,n){return void 0===n&&(n=!0),r(this,void 0,void 0,(function(){var r,a,s,c,u,d,l,f,p;return i(this,(function(i){switch(i.label){case 0:return r=new Image,n&&(r.crossOrigin="anonymous"),r.src=t,[4,r.decode()];case 1:return i.sent(),a=this.engin.device.createTexture({size:{width:r.width,height:r.height,depth:1},format:"rgba8unorm",usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.SAMPLED}),s=o.getImageData(r),"function"!=typeof this.engin.device.defaultQueue.writeTexture?[3,2]:(this.engin.device.defaultQueue.writeTexture({texture:a},s,{bytesPerRow:4*r.width},[r.width,r.height,1]),[3,5]);case 2:return void 0===createImageBitmap?[3,4]:[4,createImageBitmap(r)];case 3:return c=i.sent(),u={imageBitmap:c},d={texture:a},l={width:r.width,height:r.height,depth:1},this.engin.device.defaultQueue.copyImageBitmapToTexture(u,d,l),c.close(),[3,5];case 4:f=this.engin.device.createBuffer({size:s.byteLength,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC}),this.engin.device.defaultQueue.writeBuffer(f,0,s),(p=this.engin.device.createCommandEncoder()).copyBufferToTexture({buffer:f,bytesPerRow:4*r.width,imageHeight:r.height},{texture:a},[r.width,r.height,1]),this.engin.device.defaultQueue.submit([p.finish()]),i.label=5;case 5:return this.addUniformEntry({binding:e,visibility:GPUShaderStage.FRAGMENT,type:"sampled-texture",resource:a.createView()}),[2]}}))}))},e.prototype.generateUniforms=function(){var e={entries:[]},t=[];this.uniformEntries.forEach((function(n,r){e.entries.push({binding:n.binding,visibility:n.visibility,type:n.type}),t.push({binding:n.binding,resource:n.resource})})),this.uniformBindGroupLayout=this.engin.device.createBindGroupLayout(e),this.uniformBindGroup=this.engin.device.createBindGroup({layout:this.uniformBindGroupLayout,entries:t})},e.prototype.generatePipline=function(){this.generateUniforms(),this.vertexStage={module:this.vertModule,entryPoint:"main"},this.fragmentStage={module:this.fragModule,entryPoint:"main"},this.colorState={format:"bgra8unorm",colorBlend:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},writeMask:GPUColorWrite.ALL},this.rasterizationState={},this.layout=this.engin.device.createPipelineLayout({bindGroupLayouts:[this.uniformBindGroupLayout]}),this.vertexState={indexFormat:"uint16",vertexBuffers:this.getVertexBufferDesc()},this.pipelineDesc={layout:this.layout,vertexStage:this.vertexStage,fragmentStage:this.fragmentStage,primitiveTopology:"triangle-list",colorStates:[this.colorState],vertexState:this.vertexState,depthStencilState:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"},rasterizationState:this.rasterizationState},this.pipeline=this.engin.device.createRenderPipeline(this.pipelineDesc)},e.prototype.getVertexBufferDesc=function(){return this.attributes.map((function(e,t){return{attributes:[{shaderLocation:t,offset:0,format:"float"+e.componentSize}],arrayStride:4*e.componentSize,stepMode:"vertex"}}))},e}();t.WebGPURenderPipeline=a},23:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),a=n(1),s=n(2);n(0);var c=n(24),u=n(25),d=new a.WebGPURenderEngin("renderCanvas"),l=o.mat4.perspective(o.mat4.create(),Math.PI/3.5,d.canvas.width/d.canvas.height,.01,1e4),f=o.mat4.lookAt(o.mat4.create(),o.vec3.fromValues(0,10,200),o.vec3.fromValues(0,0,0),o.vec3.fromValues(0,1,0)),p=o.mat4.fromTranslation(o.mat4.create(),o.vec3.fromValues(0,0,0)),h=o.mat4.mul(o.mat4.create(),p,f),v=new Float32Array(32);v.set(l),v.set(h,16);var g=null,m=function(){var e=g.getUniformEntryByBinding(0).resource.buffer;g.updateBuffer(e,0,y()),d.draw(),requestAnimationFrame(m)},y=function(){return o.mat4.fromRotation(p,5e-4*(new Date).getTime(),o.vec3.fromValues(0,1,0)),o.mat4.mul(h,f,p),v.set(l),v.set(h,16),v};window.addEventListener("DOMContentLoaded",(function(){return r(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,d.init()];case 1:return e.sent()&&((g=new s.WebGPURenderPipeline(d,c.vs,c.fs)).addAttribute(u.positions),g.addAttribute(u.normals),g.setIndex(u.indices),g.addUniformBuffer(v),g.generatePipline(),m()),[2]}}))}))}))},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vs=t.fs=void 0;t.vs="#version 450\nlayout(set = 0, binding = 0) uniform Uniforms {\n    mat4 uProjectionMatrix;\n    mat4 uModelViewMatrix;\n};\n\nlayout(location = 0) in vec3 aPosition;\nlayout(location = 1) in vec3 aNormal;\n\nlayout(location = 0) out vec3 vNormal;\nlayout(location = 1) out vec4 vPosition;\nvoid main() {\n    gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aPosition, 1.0);\n    vNormal = aNormal;\n    vPosition = gl_Position;\n}";t.fs="#version 450\n    precision highp float; \n    layout(location=0) in vec3 vNormal;\n    layout(location=1) in vec4 vPosition;\n    layout(location=0) out vec4 fragColor;\n    \n\n    void main(){ \n        //光锥角度的cos值 \n    //在js中使用math.cos(度数) 使用uniform变量传入也可\n    float lowerLimit= 0.95;\n    float upperLimit = 0.95 * 1.02;\n    vec4 color = vec4(1, 0.7, 0.5, 1);  // 模型颜色\n    vec3 lightColor = vec3(0.1, 1, 1); //光源颜色\n    vec3 normal = normalize(vNormal); //法向量 \n    vec3 lightPosition = vec3(25,25,30);//光源位置 \n    vec3 lightDir = normalize(vec3(0,0,1)); //光源方向\n    //\n    vec3 surfaceWorldPosition = vPosition.xyz; // (u_modelMatrix * v_position).xyz;\n    vec3 surface2light = normalize(lightPosition - surfaceWorldPosition);//面到光源方向\n    float dotFromDirection = dot(surface2light, -lightDir);  \n    //判断点乘后的结果是不是大于限定值 并平滑插值\n    float inLight = smoothstep(lowerLimit, upperLimit, dotFromDirection);//平滑过渡\n    float cosTheta = max(dot(normal, surface2light),0.0); // 计算面到光源向量与法向量夹角的cos值\n    vec3 diffuse = lightColor * vec3(color) * inLight *  cosTheta;\n        fragColor  = vec4(diffuse,color.a);\n    }\n"},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.indices=t.normals=t.positions=void 0;var r=new Float32Array([50,-50,0,-50,-50,0,-50,50,0,50,50,0]);t.positions=r;var i=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1]);t.normals=i;var o=new Uint16Array([0,2,1,0,3,2]);t.indices=o},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImageData=void 0;t.getImageData=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height).data}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZS9yZW5kZXJFbmdpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5naW5lL3BpcGxpbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlbW8vNy5zcG90TGlnaHQvcGFnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGVtby83LnNwb3RMaWdodC9zaGFkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlbW8vNy5zcG90TGlnaHQvZGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5naW5lL3V0aWxzLnRzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayIsIndpbmRvdyIsImhvdEF2YWlsYWJsZUZpbGVzTWFwIiwiaG90UmVxdWVzdGVkRmlsZXNNYXAiLCJob3RVcGRhdGUiLCJob3RXYWl0aW5nRmlsZXMiLCJob3RDaHVua3NMb2FkaW5nIiwiaG90VXBkYXRlRG93bmxvYWRlZCIsImhvdEFkZFVwZGF0ZUNodW5rIiwiaG90Q3VycmVudENoaWxkTW9kdWxlIiwiaG90QXBwbHlPblVwZGF0ZSIsImhvdEN1cnJlbnRIYXNoIiwiaG90Q3VycmVudE1vZHVsZURhdGEiLCJob3RDdXJyZW50UGFyZW50cyIsImhvdEN1cnJlbnRQYXJlbnRzVGVtcCIsImhvdENyZWF0ZU1vZHVsZSIsImhvdCIsIl9hY2NlcHRlZERlcGVuZGVuY2llcyIsIl9kZWNsaW5lZERlcGVuZGVuY2llcyIsIl9zZWxmQWNjZXB0ZWQiLCJfc2VsZkRlY2xpbmVkIiwiX3NlbGZJbnZhbGlkYXRlZCIsIl9kaXNwb3NlSGFuZGxlcnMiLCJfbWFpbiIsImFjdGl2ZSIsImFjY2VwdCIsImRlcCIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiZGVjbGluZSIsImRpc3Bvc2UiLCJhZGREaXNwb3NlSGFuZGxlciIsInJlbW92ZURpc3Bvc2VIYW5kbGVyIiwiaWR4IiwiaW5kZXhPZiIsImludmFsaWRhdGUiLCJ0aGlzIiwiaG90U3RhdHVzIiwiaG90U2V0U3RhdHVzIiwiaG90QXBwbHlJbnZhbGlkYXRlZE1vZHVsZSIsImhvdFF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcyIsImNoZWNrIiwiaG90Q2hlY2siLCJob3RBcHBseSIsInN0YXR1cyIsImwiLCJob3RTdGF0dXNIYW5kbGVycyIsImFkZFN0YXR1c0hhbmRsZXIiLCJyZW1vdmVTdGF0dXNIYW5kbGVyIiwibmV3U3RhdHVzIiwiaG90RGVmZXJyZWQiLCJob3RVcGRhdGVOZXdIYXNoIiwiaG90V2FpdGluZ0ZpbGVzTWFwIiwidG9Nb2R1bGVJZCIsImlkIiwiRXJyb3IiLCJyZXF1ZXN0VGltZW91dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiWE1MSHR0cFJlcXVlc3QiLCJyZXF1ZXN0IiwicmVxdWVzdFBhdGgiLCJwIiwib3BlbiIsInRpbWVvdXQiLCJzZW5kIiwiZXJyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInVwZGF0ZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImUiLCJ0aGVuIiwiaG90QXBwbHlJbnZhbGlkYXRlZE1vZHVsZXMiLCJjIiwiaCIsInByb21pc2UiLCJob3RFbnN1cmVVcGRhdGVDaHVuayIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNoYXJzZXQiLCJzcmMiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJob3REb3dubG9hZFVwZGF0ZUNodW5rIiwiZGVmZXJyZWQiLCJvdXRkYXRlZE1vZHVsZXMiLCJvcHRpb25zIiwiaG90QXBwbHlJbnRlcm5hbCIsImNiIiwibW9kdWxlIiwiZ2V0QWZmZWN0ZWRTdHVmZiIsInVwZGF0ZU1vZHVsZUlkIiwib3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJxdWV1ZSIsIm1hcCIsImNoYWluIiwicXVldWVJdGVtIiwicG9wIiwiaW5zdGFsbGVkTW9kdWxlcyIsInR5cGUiLCJwYXJlbnRzIiwicGFyZW50SWQiLCJwYXJlbnQiLCJjb25jYXQiLCJhZGRBbGxUb1NldCIsImEiLCJiIiwiaXRlbSIsImFwcGxpZWRVcGRhdGUiLCJ3YXJuVW5leHBlY3RlZFJlcXVpcmUiLCJjb25zb2xlIiwid2FybiIsImFib3J0RXJyb3IiLCJkb0FwcGx5IiwiZG9EaXNwb3NlIiwiY2hhaW5JbmZvIiwiam9pbiIsIm9uRGVjbGluZWQiLCJpZ25vcmVEZWNsaW5lZCIsIm9uVW5hY2NlcHRlZCIsImlnbm9yZVVuYWNjZXB0ZWQiLCJvbkFjY2VwdGVkIiwib25EaXNwb3NlZCIsIm91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyIsInNsaWNlIiwiZXJyb3JIYW5kbGVyIiwia2V5cyIsImZvckVhY2giLCJob3REaXNwb3NlQ2h1bmsiLCJkZXBlbmRlbmN5IiwibW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJkaXNwb3NlSGFuZGxlcnMiLCJjaGlsZHJlbiIsImNoaWxkIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJvbkVycm9yZWQiLCJkZXBlbmRlbmN5SWQiLCJpZ25vcmVFcnJvcmVkIiwiZXJyMiIsIm9yaWdpbmFsRXJyb3IiLCJsaXN0IiwiNyIsImV4cG9ydHMiLCJtZSIsImZuIiwiT2JqZWN0RmFjdG9yeSIsIm5hbWUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwic2V0IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImZpbmlzaENodW5rTG9hZGluZyIsInQiLCJtb2RlIiwiaG90Q3JlYXRlUmVxdWlyZSIsIm0iLCJkIiwiZ2V0dGVyIiwibyIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJqc29ucEFycmF5Iiwib2xkSnNvbnBGdW5jdGlvbiIsImNhbnZhc09yRG9tSWQiLCJwaXBlbGluZXMiLCJjbGVhckNvbG9yIiwiZyIsImdwdSIsIm5hdmlnYXRvciIsIkhUTUxDYW52YXNFbGVtZW50IiwiY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbml0IiwicmVxdWVzdEFkYXB0ZXIiLCJwb3dlclByZWZlcmVuY2UiLCJhZGFwdGVyIiwicmVxdWVzdERldmljZSIsImRldmljZSIsIndpZHRoIiwicGFyZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiY29udGV4dCIsImdldENvbnRleHQiLCJnZXRTd2FwQ2hhaW5QcmVmZXJyZWRGb3JtYXQiLCJzd2FwQ2hhaW5UZXh0dXJlRm9ybWF0Iiwic3dhcENoYWluIiwiY29uZmlndXJlU3dhcENoYWluIiwiZm9ybWF0IiwidXNhZ2UiLCJHUFVUZXh0dXJlVXNhZ2UiLCJPVVRQVVRfQVRUQUNITUVOVCIsIkNPUFlfU1JDIiwiZ2xzbGFuZyIsImRlcHRoVGV4dHVyZSIsImNyZWF0ZVRleHR1cmUiLCJzaXplIiwiZGVwdGgiLCJkcmF3IiwidmVydE51bSIsImNvbW1hbmRFbmNvZGVyIiwiY3JlYXRlQ29tbWFuZEVuY29kZXIiLCJyZW5kZXJQYXNzRGVzYyIsImNvbG9yQXR0YWNobWVudHMiLCJhdHRhY2htZW50IiwiZ2V0Q3VycmVudFRleHR1cmUiLCJjcmVhdGVWaWV3IiwibG9hZFZhbHVlIiwic3RvcmVPcCIsImRlcHRoU3RlbmNpbEF0dGFjaG1lbnQiLCJkZXB0aExvYWRWYWx1ZSIsImRlcHRoU3RvcmVPcCIsInN0ZW5jaWxMb2FkVmFsdWUiLCJzdGVuY2lsU3RvcmVPcCIsInJlbmRlclBhc3NFbmNvZGVyIiwiYmVnaW5SZW5kZXJQYXNzIiwiY3VycmVudFBpcGVsaW5lIiwic2V0UGlwZWxpbmUiLCJwaXBlbGluZSIsInNldEJpbmRHcm91cCIsInVuaWZvcm1CaW5kR3JvdXAiLCJzZXRWaWV3cG9ydCIsInNldFNjaXNzb3JSZWN0IiwiYXR0cmlidXRlcyIsImJ1ZmZlciIsInNldFZlcnRleEJ1ZmZlciIsImluZGV4TGVuZ3RoIiwic2V0SW5kZXhCdWZmZXIiLCJpbmRleEJ1ZmZlciIsImRyYXdJbmRleGVkIiwiZW5kUGFzcyIsImRlZmF1bHRRdWV1ZSIsInN1Ym1pdCIsImZpbmlzaCIsIldlYkdQVVJlbmRlckVuZ2luIiwiZW5naW5lIiwidnMiLCJmcyIsInVuaWZvcm1FbnRyaWVzIiwiTWFwIiwiZW5naW4iLCJ2ZXJ0TW9kdWxlIiwiY3JlYXRlU2hhZGVyTW9kdWxlIiwiY29kZSIsImNvbXBpbGVHTFNMIiwic291cmNlIiwidHJhbnNmb3JtIiwiZnJhZ01vZHVsZSIsImNyZWF0ZUJ1ZmZlciIsImZyb21UeXBlZEFycmF5IiwiZGVzYyIsImJ5dGVMZW5ndGgiLCJjcmVhdGVCdWZmZXJNYXBwZWQiLCJidWZmZXJNYXBwZWQiLCJjb25zdHJ1Y3RvciIsInVubWFwIiwidXBkYXRlQnVmZmVyIiwidG8iLCJvZmZzZXQiLCJ3cml0ZUJ1ZmZlciIsImFkZEF0dHJpYnV0ZSIsInR5cGVkQXJyYXkiLCJjb21wb25lbnRTaXplIiwiR1BVQnVmZmVyVXNhZ2UiLCJWRVJURVgiLCJzZXRJbmRleCIsIklOREVYIiwiYWRkVW5pZm9ybUVudHJ5IiwiYmluZGluZyIsImdldFVuaWZvcm1FbnRyeUJ5QmluZGluZyIsImFkZFVuaWZvcm1CdWZmZXIiLCJVTklGT1JNIiwiQ09QWV9EU1QiLCJ2aXNpYmlsaXR5IiwiR1BVU2hhZGVyU3RhZ2UiLCJGUkFHTUVOVCIsInJlc291cmNlIiwiYWRkU2FtcGxlciIsIm1hZ0ZpbHRlciIsIm1pbkZpbHRlciIsInNhbXBsZXIiLCJjcmVhdGVTYW1wbGVyIiwibWF4QW5pc290cm9weSIsImFkZFRleHR1cmVWaWV3IiwidXJsIiwibmVlZENvcnMiLCJpbWciLCJJbWFnZSIsImNyb3NzT3JpZ2luIiwiZGVjb2RlIiwidGV4dHVyZSIsIlNBTVBMRUQiLCJ0ZXh0dXJlRGF0YSIsImdldEltYWdlRGF0YSIsIndyaXRlVGV4dHVyZSIsImJ5dGVzUGVyUm93IiwiY3JlYXRlSW1hZ2VCaXRtYXAiLCJiaXRtYXAiLCJpbWFnZUJpdG1hcCIsImRlc3RpbmF0aW9uIiwiY29weVNpemUiLCJjb3B5SW1hZ2VCaXRtYXBUb1RleHR1cmUiLCJjbG9zZSIsInRleHR1cmVEYXRhQnVmZmVyIiwidGV4dHVyZUxvYWRFbmNvZGVyIiwiY29weUJ1ZmZlclRvVGV4dHVyZSIsImltYWdlSGVpZ2h0IiwiZ2VuZXJhdGVVbmlmb3JtcyIsImJpbmRHcm91cExheW91dERlcyIsImVudHJpZXMiLCJiaW5kR3JvdXBFbnRyaWVzIiwiZW50cnkiLCJ1bmlmb3JtQmluZEdyb3VwTGF5b3V0IiwiY3JlYXRlQmluZEdyb3VwTGF5b3V0IiwiY3JlYXRlQmluZEdyb3VwIiwibGF5b3V0IiwiZ2VuZXJhdGVQaXBsaW5lIiwidmVydGV4U3RhZ2UiLCJlbnRyeVBvaW50IiwiZnJhZ21lbnRTdGFnZSIsImNvbG9yU3RhdGUiLCJjb2xvckJsZW5kIiwic3JjRmFjdG9yIiwiZHN0RmFjdG9yIiwib3BlcmF0aW9uIiwid3JpdGVNYXNrIiwiR1BVQ29sb3JXcml0ZSIsIkFMTCIsInJhc3Rlcml6YXRpb25TdGF0ZSIsImNyZWF0ZVBpcGVsaW5lTGF5b3V0IiwiYmluZEdyb3VwTGF5b3V0cyIsInZlcnRleFN0YXRlIiwiaW5kZXhGb3JtYXQiLCJ2ZXJ0ZXhCdWZmZXJzIiwiZ2V0VmVydGV4QnVmZmVyRGVzYyIsInBpcGVsaW5lRGVzYyIsInByaW1pdGl2ZVRvcG9sb2d5IiwiY29sb3JTdGF0ZXMiLCJkZXB0aFN0ZW5jaWxTdGF0ZSIsImRlcHRoV3JpdGVFbmFibGVkIiwiZGVwdGhDb21wYXJlIiwiY3JlYXRlUmVuZGVyUGlwZWxpbmUiLCJpbmRleCIsInNoYWRlckxvY2F0aW9uIiwiYXJyYXlTdHJpZGUiLCJzdGVwTW9kZSIsIldlYkdQVVJlbmRlclBpcGVsaW5lIiwicmVuZGVyRW5naW5lIiwicHJvamVjdGlvbk10cml4IiwibWF0NCIsInBlcnNwZWN0aXZlIiwiTWF0aCIsIlBJIiwidmlld01hdHJpeCIsImxvb2tBdCIsInZlYzMiLCJmcm9tVmFsdWVzIiwibW9kZWxNYXRyaXgiLCJmcm9tVHJhbnNsYXRpb24iLCJtdk1hdHJpeCIsIm11bCIsIm1hdHJpeEFycmF5IiwiRmxvYXQzMkFycmF5IiwicGlwbGluZSIsInJlbmRlciIsImdldFJvdGF0ZU1hdHJpeCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImZyb21Sb3RhdGlvbiIsIkRhdGUiLCJnZXRUaW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBvc2l0aW9ucyIsIm5vcm1hbHMiLCJpbmRpY2VzIiwiVWludDE2QXJyYXkiLCJjdHgiLCJkcmF3SW1hZ2UiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVBQXFCQyxHQVE3QixJQVBBLElBTUlDLEVBQVVDLEVBTlZDLEVBQVdILEVBQUssR0FDaEJJLEVBQWNKLEVBQUssR0FDbkJLLEVBQWlCTCxFQUFLLEdBSUhNLEVBQUksRUFBR0MsRUFBVyxHQUNwQ0QsRUFBSUgsRUFBU0ssT0FBUUYsSUFDekJKLEVBQVVDLEVBQVNHLEdBQ2hCRyxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLQyxFQUFpQlgsSUFBWVcsRUFBZ0JYLElBQ3BGSyxFQUFTTyxLQUFLRCxFQUFnQlgsR0FBUyxJQUV4Q1csRUFBZ0JYLEdBQVcsRUFFNUIsSUFBSUQsS0FBWUcsRUFDWkssT0FBT0MsVUFBVUMsZUFBZUMsS0FBS1IsRUFBYUgsS0FDcERjLEVBQVFkLEdBQVlHLEVBQVlILElBS2xDLElBRkdl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LEVBQWFoTCxRLGNBQW5CLFlBRWhCZ00sRUFBVSxJQUFJLEVBQUFqQixxQkFBcUJDLEVBQWMsRUFBQS9HLEdBQUksRUFBQUMsS0FDN0N1QixhQUFhLEVBQUErRyxXQUNyQlIsRUFBUXZHLGFBQWEsRUFBQWdILFNBQ3JCVCxFQUFRbEcsU0FBUyxFQUFBNEcsU0FDakJWLEVBQVE3RixpQkFBaUIyRixHQUN6QkUsRUFBUS9DLGtCQUNSZ0QsSyxpSENDSyxFQUFBaEksR0E5Q0YsMmJBOENGLEVBQUFDLEdBN0JFLHVtQyx3SENoQlgsSUFBTXNJLEVBQVksSUFBSVQsYUFBYSxDQUNqQyxJQUFJLEdBQUcsR0FDTixJQUFJLEdBQUcsR0FDUCxHQUFHLEdBQUcsRUFDUCxHQUFHLEdBQUcsSUFPQyxFQUFBUyxZQUpULElBQU1DLEVBQVUsSUFBSVYsYUFBYSxDQUFDLEVBQUcsR0FBSSxFQUFHLEVBQUcsR0FBSSxFQUFHLEVBQUcsR0FBSSxFQUFHLEVBQUcsR0FBSSxJQUluRCxFQUFBVSxVQUZwQixJQUFNQyxFQUFVLElBQUlDLFlBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsSUFFbkIsRUFBQUQsVyxzR0NIcEIsRUFBQWhGLGFBVFksU0FBQ1AsR0FDbEIsSUFBSXJILEVBQVN6RyxTQUFTQyxjQUFjLFVBQ2hDc1QsRUFBTTlNLEVBQU9jLFdBQVcsTUFJNUIsT0FIQWQsRUFBT1EsTUFBUTZHLEVBQUk3RyxNQUNuQlIsRUFBT1csT0FBUzBHLEVBQUkxRyxPQUNwQm1NLEVBQUlDLFVBQVUxRixFQUFLLEVBQUcsR0FDZnlGLEVBQUlsRixhQUFhLEVBQUcsRUFBR1AsRUFBSTdHLE1BQU82RyxFQUFJMUcsUUFBUW5PIiwiZmlsZSI6ImpzLzcuc3BvdExpZ2h0Ljk0OWY4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG4gXHRmdW5jdGlvbiBob3REaXNwb3NlQ2h1bmsoY2h1bmtJZCkge1xuIFx0XHRkZWxldGUgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuIFx0fVxuIFx0dmFyIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrID0gd2luZG93W1wid2VicGFja0hvdFVwZGF0ZVwiXTtcbiBcdHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl0gPSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIHdlYnBhY2tIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcykge1xuIFx0XHRob3RBZGRVcGRhdGVDaHVuayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XG4gXHRcdGlmIChwYXJlbnRIb3RVcGRhdGVDYWxsYmFjaykgcGFyZW50SG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xuIFx0fSA7XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKSB7XG4gXHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuIFx0XHRzY3JpcHQuY2hhcnNldCA9IFwidXRmLThcIjtcbiBcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNcIjtcbiBcdFx0aWYgKG51bGwpIHNjcmlwdC5jcm9zc09yaWdpbiA9IG51bGw7XG4gXHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiBcdH1cblxuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KHJlcXVlc3RUaW1lb3V0KSB7XG4gXHRcdHJlcXVlc3RUaW1lb3V0ID0gcmVxdWVzdFRpbWVvdXQgfHwgMTAwMDA7XG4gXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gXHRcdFx0XHRyZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcIk5vIGJyb3dzZXIgc3VwcG9ydFwiKSk7XG4gXHRcdFx0fVxuIFx0XHRcdHRyeSB7XG4gXHRcdFx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuIFx0XHRcdFx0dmFyIHJlcXVlc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCI7XG4gXHRcdFx0XHRyZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVxdWVzdFBhdGgsIHRydWUpO1xuIFx0XHRcdFx0cmVxdWVzdC50aW1lb3V0ID0gcmVxdWVzdFRpbWVvdXQ7XG4gXHRcdFx0XHRyZXF1ZXN0LnNlbmQobnVsbCk7XG4gXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4gXHRcdFx0XHRyZXR1cm4gcmVqZWN0KGVycik7XG4gXHRcdFx0fVxuIFx0XHRcdHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRpZiAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XG4gXHRcdFx0XHRpZiAocmVxdWVzdC5zdGF0dXMgPT09IDApIHtcbiBcdFx0XHRcdFx0Ly8gdGltZW91dFxuIFx0XHRcdFx0XHRyZWplY3QoXG4gXHRcdFx0XHRcdFx0bmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgdGltZWQgb3V0LlwiKVxuIFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDA0KSB7XG4gXHRcdFx0XHRcdC8vIG5vIHVwZGF0ZSBhdmFpbGFibGVcbiBcdFx0XHRcdFx0cmVzb2x2ZSgpO1xuIFx0XHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzICE9PSAzMDQpIHtcbiBcdFx0XHRcdFx0Ly8gb3RoZXIgZmFpbHVyZVxuIFx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgZmFpbGVkLlwiKSk7XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHQvLyBzdWNjZXNzXG4gXHRcdFx0XHRcdHRyeSB7XG4gXHRcdFx0XHRcdFx0dmFyIHVwZGF0ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuIFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG4gXHRcdFx0XHRcdFx0cmVqZWN0KGUpO1xuIFx0XHRcdFx0XHRcdHJldHVybjtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRyZXNvbHZlKHVwZGF0ZSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fTtcbiBcdFx0fSk7XG4gXHR9XG5cbiBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0dmFyIGhvdEN1cnJlbnRIYXNoID0gXCI5NDlmOGYwNWU4YTI0NGVhN2E2NlwiO1xuIFx0dmFyIGhvdFJlcXVlc3RUaW1lb3V0ID0gMTAwMDA7XG4gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcbiBcdHZhciBob3RDdXJyZW50Q2hpbGRNb2R1bGU7XG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdHZhciBob3RDdXJyZW50UGFyZW50cyA9IFtdO1xuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHNUZW1wID0gW107XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkge1xuIFx0XHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0aWYgKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XG4gXHRcdHZhciBmbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiBcdFx0XHRpZiAobWUuaG90LmFjdGl2ZSkge1xuIFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0pIHtcbiBcdFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKSA9PT0gLTEpIHtcbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMucHVzaChtb2R1bGVJZCk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0aG90Q3VycmVudENoaWxkTW9kdWxlID0gcmVxdWVzdDtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpID09PSAtMSkge1xuIFx0XHRcdFx0XHRtZS5jaGlsZHJlbi5wdXNoKHJlcXVlc3QpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRjb25zb2xlLndhcm4oXG4gXHRcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICtcbiBcdFx0XHRcdFx0XHRyZXF1ZXN0ICtcbiBcdFx0XHRcdFx0XHRcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgK1xuIFx0XHRcdFx0XHRcdG1vZHVsZUlkXG4gXHRcdFx0XHQpO1xuIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ocmVxdWVzdCk7XG4gXHRcdH07XG4gXHRcdHZhciBPYmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gT2JqZWN0RmFjdG9yeShuYW1lKSB7XG4gXHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcbiBcdFx0XHRcdH0sXG4gXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9O1xuIFx0XHR9O1xuIFx0XHRmb3IgKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkgJiZcbiBcdFx0XHRcdG5hbWUgIT09IFwiZVwiICYmXG4gXHRcdFx0XHRuYW1lICE9PSBcInRcIlxuIFx0XHRcdCkge1xuIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCBPYmplY3RGYWN0b3J5KG5hbWUpKTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0Zm4uZSA9IGZ1bmN0aW9uKGNodW5rSWQpIHtcbiBcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInJlYWR5XCIpIGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCkudGhlbihmaW5pc2hDaHVua0xvYWRpbmcsIGZ1bmN0aW9uKGVycikge1xuIFx0XHRcdFx0ZmluaXNoQ2h1bmtMb2FkaW5nKCk7XG4gXHRcdFx0XHR0aHJvdyBlcnI7XG4gXHRcdFx0fSk7XG5cbiBcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XG4gXHRcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xuIFx0XHRcdFx0XHRpZiAoIWhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmIChob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xuIFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fTtcbiBcdFx0Zm4udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdFx0aWYgKG1vZGUgJiAxKSB2YWx1ZSA9IGZuKHZhbHVlKTtcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy50KHZhbHVlLCBtb2RlICYgfjEpO1xuIFx0XHR9O1xuIFx0XHRyZXR1cm4gZm47XG4gXHR9XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSB7XG4gXHRcdHZhciBob3QgPSB7XG4gXHRcdFx0Ly8gcHJpdmF0ZSBzdHVmZlxuIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXG4gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcbiBcdFx0XHRfc2VsZkFjY2VwdGVkOiBmYWxzZSxcbiBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcbiBcdFx0XHRfc2VsZkludmFsaWRhdGVkOiBmYWxzZSxcbiBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcbiBcdFx0XHRfbWFpbjogaG90Q3VycmVudENoaWxkTW9kdWxlICE9PSBtb2R1bGVJZCxcblxuIFx0XHRcdC8vIE1vZHVsZSBBUElcbiBcdFx0XHRhY3RpdmU6IHRydWUsXG4gXHRcdFx0YWNjZXB0OiBmdW5jdGlvbihkZXAsIGNhbGxiYWNrKSB7XG4gXHRcdFx0XHRpZiAoZGVwID09PSB1bmRlZmluZWQpIGhvdC5fc2VsZkFjY2VwdGVkID0gdHJ1ZTtcbiBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwiZnVuY3Rpb25cIikgaG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxuIFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcbiBcdFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuIFx0XHRcdFx0ZWxzZSBob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuIFx0XHRcdH0sXG4gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XG4gXHRcdFx0XHRpZiAoZGVwID09PSB1bmRlZmluZWQpIGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcbiBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXG4gXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxuIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwXSA9IHRydWU7XG4gXHRcdFx0fSxcbiBcdFx0XHRkaXNwb3NlOiBmdW5jdGlvbihjYWxsYmFjaykge1xuIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XG4gXHRcdFx0fSxcbiBcdFx0XHRhZGREaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuIFx0XHRcdH0sXG4gXHRcdFx0cmVtb3ZlRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gXHRcdFx0XHRpZiAoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xuIFx0XHRcdH0sXG4gXHRcdFx0aW52YWxpZGF0ZTogZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHR0aGlzLl9zZWxmSW52YWxpZGF0ZWQgPSB0cnVlO1xuIFx0XHRcdFx0c3dpdGNoIChob3RTdGF0dXMpIHtcbiBcdFx0XHRcdFx0Y2FzZSBcImlkbGVcIjpcbiBcdFx0XHRcdFx0XHRob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHRcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJyZWFkeVwiOlxuIFx0XHRcdFx0XHRcdGhvdEFwcGx5SW52YWxpZGF0ZWRNb2R1bGUobW9kdWxlSWQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwicHJlcGFyZVwiOlxuIFx0XHRcdFx0XHRjYXNlIFwiY2hlY2tcIjpcbiBcdFx0XHRcdFx0Y2FzZSBcImRpc3Bvc2VcIjpcbiBcdFx0XHRcdFx0Y2FzZSBcImFwcGx5XCI6XG4gXHRcdFx0XHRcdFx0KGhvdFF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcyA9XG4gXHRcdFx0XHRcdFx0XHRob3RRdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMgfHwgW10pLnB1c2gobW9kdWxlSWQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRkZWZhdWx0OlxuIFx0XHRcdFx0XHRcdC8vIGlnbm9yZSByZXF1ZXN0cyBpbiBlcnJvciBzdGF0ZXNcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdH1cbiBcdFx0XHR9LFxuXG4gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcbiBcdFx0XHRjaGVjazogaG90Q2hlY2ssXG4gXHRcdFx0YXBwbHk6IGhvdEFwcGx5LFxuIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xuIFx0XHRcdFx0aWYgKCFsKSByZXR1cm4gaG90U3RhdHVzO1xuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcbiBcdFx0XHR9LFxuIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG4gXHRcdFx0fSxcbiBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0fSxcblxuIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxuIFx0XHRcdGRhdGE6IGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxuIFx0XHR9O1xuIFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSB1bmRlZmluZWQ7XG4gXHRcdHJldHVybiBob3Q7XG4gXHR9XG5cbiBcdHZhciBob3RTdGF0dXNIYW5kbGVycyA9IFtdO1xuIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xuXG4gXHRmdW5jdGlvbiBob3RTZXRTdGF0dXMobmV3U3RhdHVzKSB7XG4gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcbiBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcbiBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XG4gXHR9XG5cbiBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcbiBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcbiBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xuIFx0dmFyIGhvdEF2YWlsYWJsZUZpbGVzTWFwID0ge307XG4gXHR2YXIgaG90RGVmZXJyZWQ7XG5cbiBcdC8vIFRoZSB1cGRhdGUgaW5mb1xuIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaCwgaG90UXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzO1xuXG4gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XG4gXHRcdHZhciBpc051bWJlciA9ICtpZCArIFwiXCIgPT09IGlkO1xuIFx0XHRyZXR1cm4gaXNOdW1iZXIgPyAraWQgOiBpZDtcbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90Q2hlY2soYXBwbHkpIHtcbiBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHtcbiBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJjaGVjaygpIGlzIG9ubHkgYWxsb3dlZCBpbiBpZGxlIHN0YXR1c1wiKTtcbiBcdFx0fVxuIFx0XHRob3RBcHBseU9uVXBkYXRlID0gYXBwbHk7XG4gXHRcdGhvdFNldFN0YXR1cyhcImNoZWNrXCIpO1xuIFx0XHRyZXR1cm4gaG90RG93bmxvYWRNYW5pZmVzdChob3RSZXF1ZXN0VGltZW91dCkudGhlbihmdW5jdGlvbih1cGRhdGUpIHtcbiBcdFx0XHRpZiAoIXVwZGF0ZSkge1xuIFx0XHRcdFx0aG90U2V0U3RhdHVzKGhvdEFwcGx5SW52YWxpZGF0ZWRNb2R1bGVzKCkgPyBcInJlYWR5XCIgOiBcImlkbGVcIik7XG4gXHRcdFx0XHRyZXR1cm4gbnVsbDtcbiBcdFx0XHR9XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RBdmFpbGFibGVGaWxlc01hcCA9IHVwZGF0ZS5jO1xuIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcblxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdGhvdERlZmVycmVkID0ge1xuIFx0XHRcdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxuIFx0XHRcdFx0XHRyZWplY3Q6IHJlamVjdFxuIFx0XHRcdFx0fTtcbiBcdFx0XHR9KTtcbiBcdFx0XHRob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHRmb3IodmFyIGNodW5rSWQgaW4gaW5zdGFsbGVkQ2h1bmtzKVxuIFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb25lLWJsb2Nrc1xuIFx0XHRcdHtcbiBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdH1cbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmXG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nID09PSAwICYmXG4gXHRcdFx0XHRob3RXYWl0aW5nRmlsZXMgPT09IDBcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIHByb21pc2U7XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7XG4gXHRcdGlmICghaG90QXZhaWxhYmxlRmlsZXNNYXBbY2h1bmtJZF0gfHwgIWhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdKVxuIFx0XHRcdHJldHVybjtcbiBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcbiBcdFx0Zm9yICh2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmICgtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XG4gXHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpIHtcbiBcdFx0aWYgKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlcysrO1xuIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90VXBkYXRlRG93bmxvYWRlZCgpIHtcbiBcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XG4gXHRcdHZhciBkZWZlcnJlZCA9IGhvdERlZmVycmVkO1xuIFx0XHRob3REZWZlcnJlZCA9IG51bGw7XG4gXHRcdGlmICghZGVmZXJyZWQpIHJldHVybjtcbiBcdFx0aWYgKGhvdEFwcGx5T25VcGRhdGUpIHtcbiBcdFx0XHQvLyBXcmFwIGRlZmVycmVkIG9iamVjdCBpbiBQcm9taXNlIHRvIG1hcmsgaXQgYXMgYSB3ZWxsLWhhbmRsZWQgUHJvbWlzZSB0b1xuIFx0XHRcdC8vIGF2b2lkIHRyaWdnZXJpbmcgdW5jYXVnaHQgZXhjZXB0aW9uIHdhcm5pbmcgaW4gQ2hyb21lLlxuIFx0XHRcdC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NjU2NjZcbiBcdFx0XHRQcm9taXNlLnJlc29sdmUoKVxuIFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRcdHJldHVybiBob3RBcHBseShob3RBcHBseU9uVXBkYXRlKTtcbiBcdFx0XHRcdH0pXG4gXHRcdFx0XHQudGhlbihcbiBcdFx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KSB7XG4gXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRmdW5jdGlvbihlcnIpIHtcbiBcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0KTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XG4gXHRcdFx0Zm9yICh2YXIgaWQgaW4gaG90VXBkYXRlKSB7XG4gXHRcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMpIHtcbiBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJyZWFkeVwiKVxuIFx0XHRcdHRocm93IG5ldyBFcnJvcihcImFwcGx5KCkgaXMgb25seSBhbGxvd2VkIGluIHJlYWR5IHN0YXR1c1wiKTtcbiBcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gXHRcdHJldHVybiBob3RBcHBseUludGVybmFsKG9wdGlvbnMpO1xuIFx0fVxuXG4gXHRmdW5jdGlvbiBob3RBcHBseUludGVybmFsKG9wdGlvbnMpIHtcbiBcdFx0aG90QXBwbHlJbnZhbGlkYXRlZE1vZHVsZXMoKTtcblxuIFx0XHR2YXIgY2I7XG4gXHRcdHZhciBpO1xuIFx0XHR2YXIgajtcbiBcdFx0dmFyIG1vZHVsZTtcbiBcdFx0dmFyIG1vZHVsZUlkO1xuXG4gXHRcdGZ1bmN0aW9uIGdldEFmZmVjdGVkU3R1ZmYodXBkYXRlTW9kdWxlSWQpIHtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW3VwZGF0ZU1vZHVsZUlkXTtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcblxuIFx0XHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5tYXAoZnVuY3Rpb24oaWQpIHtcbiBcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdGNoYWluOiBbaWRdLFxuIFx0XHRcdFx0XHRpZDogaWRcbiBcdFx0XHRcdH07XG4gXHRcdFx0fSk7XG4gXHRcdFx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiBcdFx0XHRcdHZhciBxdWV1ZUl0ZW0gPSBxdWV1ZS5wb3AoKTtcbiBcdFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlSXRlbS5pZDtcbiBcdFx0XHRcdHZhciBjaGFpbiA9IHF1ZXVlSXRlbS5jaGFpbjtcbiBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0aWYgKFxuIFx0XHRcdFx0XHQhbW9kdWxlIHx8XG4gXHRcdFx0XHRcdChtb2R1bGUuaG90Ll9zZWxmQWNjZXB0ZWQgJiYgIW1vZHVsZS5ob3QuX3NlbGZJbnZhbGlkYXRlZClcbiBcdFx0XHRcdClcbiBcdFx0XHRcdFx0Y29udGludWU7XG4gXHRcdFx0XHRpZiAobW9kdWxlLmhvdC5fc2VsZkRlY2xpbmVkKSB7XG4gXHRcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWRlY2xpbmVkXCIsXG4gXHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLFxuIFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZFxuIFx0XHRcdFx0XHR9O1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKG1vZHVsZS5ob3QuX21haW4pIHtcbiBcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHR0eXBlOiBcInVuYWNjZXB0ZWRcIixcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXG4gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkXG4gXHRcdFx0XHRcdH07XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5wYXJlbnRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHRcdHZhciBwYXJlbnRJZCA9IG1vZHVsZS5wYXJlbnRzW2ldO1xuIFx0XHRcdFx0XHR2YXIgcGFyZW50ID0gaW5zdGFsbGVkTW9kdWxlc1twYXJlbnRJZF07XG4gXHRcdFx0XHRcdGlmICghcGFyZW50KSBjb250aW51ZTtcbiBcdFx0XHRcdFx0aWYgKHBhcmVudC5ob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xuIFx0XHRcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdFx0XHR0eXBlOiBcImRlY2xpbmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4uY29uY2F0KFtwYXJlbnRJZF0pLFxuIFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0cGFyZW50SWQ6IHBhcmVudElkXG4gXHRcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRpZiAob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpICE9PSAtMSkgY29udGludWU7XG4gXHRcdFx0XHRcdGlmIChwYXJlbnQuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRcdFx0XHRpZiAoIW91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSlcbiBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSA9IFtdO1xuIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XG4gXHRcdFx0XHRcdFx0Y29udGludWU7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcbiBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2gocGFyZW50SWQpO1xuIFx0XHRcdFx0XHRxdWV1ZS5wdXNoKHtcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4uY29uY2F0KFtwYXJlbnRJZF0pLFxuIFx0XHRcdFx0XHRcdGlkOiBwYXJlbnRJZFxuIFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG5cbiBcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0dHlwZTogXCJhY2NlcHRlZFwiLFxuIFx0XHRcdFx0bW9kdWxlSWQ6IHVwZGF0ZU1vZHVsZUlkLFxuIFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzOiBvdXRkYXRlZE1vZHVsZXMsXG4gXHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llczogb3V0ZGF0ZWREZXBlbmRlbmNpZXNcbiBcdFx0XHR9O1xuIFx0XHR9XG5cbiBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xuIFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xuIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xuIFx0XHRcdFx0aWYgKGEuaW5kZXhPZihpdGVtKSA9PT0gLTEpIGEucHVzaChpdGVtKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBhdCBiZWdpbiBhbGwgdXBkYXRlcyBtb2R1bGVzIGFyZSBvdXRkYXRlZFxuIFx0XHQvLyB0aGUgXCJvdXRkYXRlZFwiIHN0YXR1cyBjYW4gcHJvcGFnYXRlIHRvIHBhcmVudHMgaWYgdGhleSBkb24ndCBhY2NlcHQgdGhlIGNoaWxkcmVuXG4gXHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xuIFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XG4gXHRcdHZhciBhcHBsaWVkVXBkYXRlID0ge307XG5cbiBcdFx0dmFyIHdhcm5VbmV4cGVjdGVkUmVxdWlyZSA9IGZ1bmN0aW9uIHdhcm5VbmV4cGVjdGVkUmVxdWlyZSgpIHtcbiBcdFx0XHRjb25zb2xlLndhcm4oXG4gXHRcdFx0XHRcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIHJlc3VsdC5tb2R1bGVJZCArIFwiKSB0byBkaXNwb3NlZCBtb2R1bGVcIlxuIFx0XHRcdCk7XG4gXHRcdH07XG5cbiBcdFx0Zm9yICh2YXIgaWQgaW4gaG90VXBkYXRlKSB7XG4gXHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChob3RVcGRhdGUsIGlkKSkge1xuIFx0XHRcdFx0bW9kdWxlSWQgPSB0b01vZHVsZUlkKGlkKTtcbiBcdFx0XHRcdC8qKiBAdHlwZSB7VE9ET30gKi9cbiBcdFx0XHRcdHZhciByZXN1bHQ7XG4gXHRcdFx0XHRpZiAoaG90VXBkYXRlW2lkXSkge1xuIFx0XHRcdFx0XHRyZXN1bHQgPSBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZUlkKTtcbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdHJlc3VsdCA9IHtcbiBcdFx0XHRcdFx0XHR0eXBlOiBcImRpc3Bvc2VkXCIsXG4gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IGlkXG4gXHRcdFx0XHRcdH07XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHQvKiogQHR5cGUge0Vycm9yfGZhbHNlfSAqL1xuIFx0XHRcdFx0dmFyIGFib3J0RXJyb3IgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBkb0FwcGx5ID0gZmFsc2U7XG4gXHRcdFx0XHR2YXIgZG9EaXNwb3NlID0gZmFsc2U7XG4gXHRcdFx0XHR2YXIgY2hhaW5JbmZvID0gXCJcIjtcbiBcdFx0XHRcdGlmIChyZXN1bHQuY2hhaW4pIHtcbiBcdFx0XHRcdFx0Y2hhaW5JbmZvID0gXCJcXG5VcGRhdGUgcHJvcGFnYXRpb246IFwiICsgcmVzdWx0LmNoYWluLmpvaW4oXCIgLT4gXCIpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0c3dpdGNoIChyZXN1bHQudHlwZSkge1xuIFx0XHRcdFx0XHRjYXNlIFwic2VsZi1kZWNsaW5lZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGVjbGluZWQpIG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVEZWNsaW5lZClcbiBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG4gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIG9mIHNlbGYgZGVjbGluZTogXCIgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5tb2R1bGVJZCArXG4gXHRcdFx0XHRcdFx0XHRcdFx0Y2hhaW5JbmZvXG4gXHRcdFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwiZGVjbGluZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRlY2xpbmVkKSBvcHRpb25zLm9uRGVjbGluZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRGVjbGluZWQpXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuIFx0XHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBvZiBkZWNsaW5lZCBkZXBlbmRlbmN5OiBcIiArXG4gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm1vZHVsZUlkICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRcIiBpbiBcIiArXG4gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0LnBhcmVudElkICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJ1bmFjY2VwdGVkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25VbmFjY2VwdGVkKSBvcHRpb25zLm9uVW5hY2NlcHRlZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxuIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcbiBcdFx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2UgXCIgKyBtb2R1bGVJZCArIFwiIGlzIG5vdCBhY2NlcHRlZFwiICsgY2hhaW5JbmZvXG4gXHRcdFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwiYWNjZXB0ZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkFjY2VwdGVkKSBvcHRpb25zLm9uQWNjZXB0ZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRkb0FwcGx5ID0gdHJ1ZTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0Y2FzZSBcImRpc3Bvc2VkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EaXNwb3NlZCkgb3B0aW9ucy5vbkRpc3Bvc2VkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0ZG9EaXNwb3NlID0gdHJ1ZTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0ZGVmYXVsdDpcbiBcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbmV4Y2VwdGlvbiB0eXBlIFwiICsgcmVzdWx0LnR5cGUpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKGFib3J0RXJyb3IpIHtcbiBcdFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiYWJvcnRcIik7XG4gXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChhYm9ydEVycm9yKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChkb0FwcGx5KSB7XG4gXHRcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gaG90VXBkYXRlW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCByZXN1bHQub3V0ZGF0ZWRNb2R1bGVzKTtcbiBcdFx0XHRcdFx0Zm9yIChtb2R1bGVJZCBpbiByZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbiBcdFx0XHRcdFx0XHRpZiAoXG4gXHRcdFx0XHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gXHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llcyxcbiBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWRcbiBcdFx0XHRcdFx0XHRcdClcbiBcdFx0XHRcdFx0XHQpIHtcbiBcdFx0XHRcdFx0XHRcdGlmICghb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKVxuIFx0XHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0gPSBbXTtcbiBcdFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KFxuIFx0XHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0sXG4gXHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF1cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAoZG9EaXNwb3NlKSB7XG4gXHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkTW9kdWxlcywgW3Jlc3VsdC5tb2R1bGVJZF0pO1xuIFx0XHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IHdhcm5VbmV4cGVjdGVkUmVxdWlyZTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBTdG9yZSBzZWxmIGFjY2VwdGVkIG91dGRhdGVkIG1vZHVsZXMgdG8gcmVxdWlyZSB0aGVtIGxhdGVyIGJ5IHRoZSBtb2R1bGUgc3lzdGVtXG4gXHRcdHZhciBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMgPSBbXTtcbiBcdFx0Zm9yIChpID0gMDsgaSA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdG1vZHVsZUlkID0gb3V0ZGF0ZWRNb2R1bGVzW2ldO1xuIFx0XHRcdGlmIChcbiBcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmXG4gXHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZCAmJlxuIFx0XHRcdFx0Ly8gcmVtb3ZlZCBzZWxmLWFjY2VwdGVkIG1vZHVsZXMgc2hvdWxkIG5vdCBiZSByZXF1aXJlZFxuIFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gIT09IHdhcm5VbmV4cGVjdGVkUmVxdWlyZSAmJlxuIFx0XHRcdFx0Ly8gd2hlbiBjYWxsZWQgaW52YWxpZGF0ZSBzZWxmLWFjY2VwdGluZyBpcyBub3QgcG9zc2libGVcbiBcdFx0XHRcdCFpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZJbnZhbGlkYXRlZFxuIFx0XHRcdCkge1xuIFx0XHRcdFx0b3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLnB1c2goe1xuIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRwYXJlbnRzOiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5wYXJlbnRzLnNsaWNlKCksXG4gXHRcdFx0XHRcdGVycm9ySGFuZGxlcjogaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWRcbiBcdFx0XHRcdH0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIE5vdyBpbiBcImRpc3Bvc2VcIiBwaGFzZVxuIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xuIFx0XHRPYmplY3Qua2V5cyhob3RBdmFpbGFibGVGaWxlc01hcCkuZm9yRWFjaChmdW5jdGlvbihjaHVua0lkKSB7XG4gXHRcdFx0aWYgKGhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdID09PSBmYWxzZSkge1xuIFx0XHRcdFx0aG90RGlzcG9zZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdH1cbiBcdFx0fSk7XG5cbiBcdFx0dmFyIGlkeDtcbiBcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XG4gXHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gXHRcdFx0bW9kdWxlSWQgPSBxdWV1ZS5wb3AoKTtcbiBcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRpZiAoIW1vZHVsZSkgY29udGludWU7XG5cbiBcdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG4gXHRcdFx0Ly8gQ2FsbCBkaXNwb3NlIGhhbmRsZXJzXG4gXHRcdFx0dmFyIGRpc3Bvc2VIYW5kbGVycyA9IG1vZHVsZS5ob3QuX2Rpc3Bvc2VIYW5kbGVycztcbiBcdFx0XHRmb3IgKGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHRjYiA9IGRpc3Bvc2VIYW5kbGVyc1tqXTtcbiBcdFx0XHRcdGNiKGRhdGEpO1xuIFx0XHRcdH1cbiBcdFx0XHRob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF0gPSBkYXRhO1xuXG4gXHRcdFx0Ly8gZGlzYWJsZSBtb2R1bGUgKHRoaXMgZGlzYWJsZXMgcmVxdWlyZXMgZnJvbSB0aGlzIG1vZHVsZSlcbiBcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xuXG4gXHRcdFx0Ly8gcmVtb3ZlIG1vZHVsZSBmcm9tIGNhY2hlXG4gXHRcdFx0ZGVsZXRlIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuXG4gXHRcdFx0Ly8gd2hlbiBkaXNwb3NpbmcgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIGRpc3Bvc2UgaGFuZGxlclxuIFx0XHRcdGRlbGV0ZSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG5cbiBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxuIFx0XHRcdGZvciAoaiA9IDA7IGogPCBtb2R1bGUuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBjaGlsZCA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlLmNoaWxkcmVuW2pdXTtcbiBcdFx0XHRcdGlmICghY2hpbGQpIGNvbnRpbnVlO1xuIFx0XHRcdFx0aWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkge1xuIFx0XHRcdFx0XHRjaGlsZC5wYXJlbnRzLnNwbGljZShpZHgsIDEpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIHJlbW92ZSBvdXRkYXRlZCBkZXBlbmRlbmN5IGZyb20gbW9kdWxlIGNoaWxkcmVuXG4gXHRcdHZhciBkZXBlbmRlbmN5O1xuIFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXM7XG4gXHRcdGZvciAobW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKVxuIFx0XHRcdCkge1xuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRpZiAobW9kdWxlKSB7XG4gXHRcdFx0XHRcdG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbal07XG4gXHRcdFx0XHRcdFx0aWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XG4gXHRcdFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBtb2R1bGUuY2hpbGRyZW4uc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBOb3cgaW4gXCJhcHBseVwiIHBoYXNlXG4gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xuXG4gXHRcdGlmIChob3RVcGRhdGVOZXdIYXNoICE9PSB1bmRlZmluZWQpIHtcbiBcdFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XG4gXHRcdFx0aG90VXBkYXRlTmV3SGFzaCA9IHVuZGVmaW5lZDtcbiBcdFx0fVxuIFx0XHRob3RVcGRhdGUgPSB1bmRlZmluZWQ7XG5cbiBcdFx0Ly8gaW5zZXJ0IG5ldyBjb2RlXG4gXHRcdGZvciAobW9kdWxlSWQgaW4gYXBwbGllZFVwZGF0ZSkge1xuIFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXBwbGllZFVwZGF0ZSwgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIGNhbGwgYWNjZXB0IGhhbmRsZXJzXG4gXHRcdHZhciBlcnJvciA9IG51bGw7XG4gXHRcdGZvciAobW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKVxuIFx0XHRcdCkge1xuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRpZiAobW9kdWxlKSB7XG4gXHRcdFx0XHRcdG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gW107XG4gXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdFx0XHRcdGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXTtcbiBcdFx0XHRcdFx0XHRjYiA9IG1vZHVsZS5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcGVuZGVuY3ldO1xuIFx0XHRcdFx0XHRcdGlmIChjYikge1xuIFx0XHRcdFx0XHRcdFx0aWYgKGNhbGxiYWNrcy5pbmRleE9mKGNiKSAhPT0gLTEpIGNvbnRpbnVlO1xuIFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2goY2IpO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHRcdFx0Y2IgPSBjYWxsYmFja3NbaV07XG4gXHRcdFx0XHRcdFx0dHJ5IHtcbiBcdFx0XHRcdFx0XHRcdGNiKG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzKTtcbiBcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcbiBcdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJhY2NlcHQtZXJyb3JlZFwiLFxuIFx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdFx0XHRkZXBlbmRlbmN5SWQ6IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldLFxuIFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnJcbiBcdFx0XHRcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjtcbiBcdFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xuIFx0XHRmb3IgKGkgPSAwOyBpIDwgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGl0ZW0gPSBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXNbaV07XG4gXHRcdFx0bW9kdWxlSWQgPSBpdGVtLm1vZHVsZTtcbiBcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IGl0ZW0ucGFyZW50cztcbiBcdFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSBtb2R1bGVJZDtcbiBcdFx0XHR0cnkge1xuIFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCk7XG4gXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4gXHRcdFx0XHRpZiAodHlwZW9mIGl0ZW0uZXJyb3JIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiBcdFx0XHRcdFx0dHJ5IHtcbiBcdFx0XHRcdFx0XHRpdGVtLmVycm9ySGFuZGxlcihlcnIpO1xuIFx0XHRcdFx0XHR9IGNhdGNoIChlcnIyKSB7XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3ItaGFuZGxlci1lcnJvcmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVycjIsXG4gXHRcdFx0XHRcdFx0XHRcdG9yaWdpbmFsRXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjI7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtYWNjZXB0LWVycm9yZWRcIixcbiBcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnJcbiBcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gaGFuZGxlIGVycm9ycyBpbiBhY2NlcHQgaGFuZGxlcnMgYW5kIHNlbGYgYWNjZXB0ZWQgbW9kdWxlIGxvYWRcbiBcdFx0aWYgKGVycm9yKSB7XG4gXHRcdFx0aG90U2V0U3RhdHVzKFwiZmFpbFwiKTtcbiBcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuIFx0XHR9XG5cbiBcdFx0aWYgKGhvdFF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcykge1xuIFx0XHRcdHJldHVybiBob3RBcHBseUludGVybmFsKG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24obGlzdCkge1xuIFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLmZvckVhY2goZnVuY3Rpb24obW9kdWxlSWQpIHtcbiBcdFx0XHRcdFx0aWYgKGxpc3QuaW5kZXhPZihtb2R1bGVJZCkgPCAwKSBsaXN0LnB1c2gobW9kdWxlSWQpO1xuIFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRyZXR1cm4gbGlzdDtcbiBcdFx0XHR9KTtcbiBcdFx0fVxuXG4gXHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XG4gXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gXHRcdFx0cmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHR9KTtcbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90QXBwbHlJbnZhbGlkYXRlZE1vZHVsZXMoKSB7XG4gXHRcdGlmIChob3RRdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMpIHtcbiBcdFx0XHRpZiAoIWhvdFVwZGF0ZSkgaG90VXBkYXRlID0ge307XG4gXHRcdFx0aG90UXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzLmZvckVhY2goaG90QXBwbHlJbnZhbGlkYXRlZE1vZHVsZSk7XG4gXHRcdFx0aG90UXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzID0gdW5kZWZpbmVkO1xuIFx0XHRcdHJldHVybiB0cnVlO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEFwcGx5SW52YWxpZGF0ZWRNb2R1bGUobW9kdWxlSWQpIHtcbiBcdFx0aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBtb2R1bGVJZCkpXG4gXHRcdFx0aG90VXBkYXRlW21vZHVsZUlkXSA9IG1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0NzogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRob3Q6IGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCksXG4gXHRcdFx0cGFyZW50czogKGhvdEN1cnJlbnRQYXJlbnRzVGVtcCA9IGhvdEN1cnJlbnRQYXJlbnRzLCBob3RDdXJyZW50UGFyZW50cyA9IFtdLCBob3RDdXJyZW50UGFyZW50c1RlbXApLFxuIFx0XHRcdGNoaWxkcmVuOiBbXVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gX193ZWJwYWNrX2hhc2hfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5oID0gZnVuY3Rpb24oKSB7IHJldHVybiBob3RDdXJyZW50SGFzaDsgfTtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzIzLDBdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiLypcbiAqIEBBdXRob3I6IGhvbmd4dS5saW5cbiAqIEBEYXRlOiAyMDIwLTA3LTA4IDE1OjQ4OjEwXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA3LTIwIDIyOjIwOjQzXG4gKi9cblxuaW1wb3J0IHsgR2xzbGFuZyB9IGZyb20gXCJAd2ViZ3B1L2dsc2xhbmcvZGlzdC93ZWItZGV2ZWwvZ2xzbGFuZy5vbmVmaWxlXCI7XG5pbXBvcnQgZ2xzbGFuZ01vZHVsZSBmcm9tIFwiQHdlYmdwdS9nbHNsYW5nL2Rpc3Qvd2ViLWRldmVsL2dsc2xhbmcub25lZmlsZVwiO1xuaW1wb3J0IHsgV2ViR1BVUmVuZGVyUGlwZWxpbmUgfSBmcm9tIFwiLi9waXBsaW5lXCI7XG5cbmV4cG9ydCBjbGFzcyBXZWJHUFVSZW5kZXJFbmdpbiB7XG4gICAgZ3B1OiBHUFU7XG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBjb250ZXh0OiBHUFVDYW52YXNDb250ZXh0O1xuXG4gICAgYWRhcHRlcjogR1BVQWRhcHRlcjtcbiAgICBkZXZpY2U6IEdQVURldmljZTtcbiAgICBxdWV1ZTogR1BVUXVldWU7XG5cbiAgICBzd2FwQ2hhaW46IEdQVVN3YXBDaGFpbjtcbiAgICBzd2FwQ2hhaW5UZXh0dXJlRm9ybWF0OiBHUFVUZXh0dXJlRm9ybWF0O1xuICAgIGRlcHRoVGV4dHVyZTogR1BVVGV4dHVyZTtcblxuICAgIGdsc2xhbmc6IEdsc2xhbmc7XG4gICAgcGlwZWxpbmVzOiBBcnJheTxXZWJHUFVSZW5kZXJQaXBlbGluZT4gPSBbXTtcblxuICAgIGNvbW1hbmRFbmNvZGVyOiBHUFVDb21tYW5kRW5jb2RlcjtcbiAgICByZW5kZXJQYXNzRW5jb2RlcjogR1BVUmVuZGVyUGFzc0VuY29kZXI7XG5cbiAgICBjbGVhckNvbG9yID0geyByOiAwLjI1LCBnOiAwLjUsIGI6IDEsIGE6IDEuMCB9O1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhc09yRG9tSWQ6IEhUTUxDYW52YXNFbGVtZW50IHwgc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZ3B1ID0gbmF2aWdhdG9yLmdwdTtcbiAgICAgICAgaWYgKGNhbnZhc09yRG9tSWQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXNPckRvbUlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXNPckRvbUlkKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGluaXQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ncHUpIHtcbiAgICAgICAgICAgICAgICAvLyDmi7/liLBncHXnmoTpgILphY3lmajvvIjmmL7ljaHvvIlcbiAgICAgICAgICAgICAgICB0aGlzLmFkYXB0ZXIgPSBhd2FpdCBuYXZpZ2F0b3IuZ3B1LnJlcXVlc3RBZGFwdGVyKHtcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJQcmVmZXJlbmNlOiBcImhpZ2gtcGVyZm9ybWFuY2VcIixcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIOmAgumFjeWZqOiOt+WPluWFt+S9k+eahGRldmljZeWunuS+i1xuICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlID0gYXdhaXQgdGhpcy5hZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMucGFyZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5wYXJlbnRFbGVtZW50LmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgICAgIC8vIOi/meWPpemdnuW4uOmhuuW6j+mdnuW4uOmHjeimge+8jOS4jeiDveWcqOiOt+WPlmRldmljZeS5i+WJjeiOt+WPlmNvbnRleHTvvIzlkKbliJnkvJpjYW52YXPkuI3mmL7npLrlm77lvaJcbiAgICAgICAgICAgICAgICAvLyDlj6rmnInlnKhkb23mm7TmlrDvvIjkvovlpoLkv67mlLljYW52YXNjc3Plrr3pq5jvvInlkI7miY3mmL7npLpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQgPSAoPHVua25vd24+dGhpcy5jYW52YXMuZ2V0Q29udGV4dChcImdwdXByZXNlbnRcIikpIGFzIEdQVUNhbnZhc0NvbnRleHQ7XG5cbiAgICAgICAgICAgICAgICAvLyDojrflj5Zzd2FwY2hhaW4g55So5LqO5ZCRY2FudmFz6L6T5Ye65riy5p+T57uT5p6cXG4gICAgICAgICAgICAgICAgdGhpcy5zd2FwQ2hhaW5UZXh0dXJlRm9ybWF0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmdldFN3YXBDaGFpblByZWZlcnJlZEZvcm1hdCh0aGlzLmRldmljZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zd2FwQ2hhaW4gPSB0aGlzLmNvbnRleHQuY29uZmlndXJlU3dhcENoYWluKHtcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlOiB0aGlzLmRldmljZSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiB0aGlzLnN3YXBDaGFpblRleHR1cmVGb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiBHUFVUZXh0dXJlVXNhZ2UuT1VUUFVUX0FUVEFDSE1FTlQgfCBHUFVUZXh0dXJlVXNhZ2UuQ09QWV9TUkMsXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmdsc2xhbmcgPSBhd2FpdCBnbHNsYW5nTW9kdWxlKCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRlcHRoVGV4dHVyZSA9IHRoaXMuZGV2aWNlLmNyZWF0ZVRleHR1cmUoe1xuICAgICAgICAgICAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHRoOiAxLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZGVwdGgyNHBsdXMtc3RlbmNpbDhcIixcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IEdQVVRleHR1cmVVc2FnZS5PVVRQVVRfQVRUQUNITUVOVCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdyh2ZXJ0TnVtPzogbnVtYmVyKSB7XG4gICAgICAgIC8vIOWIm+W7umNvbW1hbmTnlJ/miJDlmagg55So5p2l57yW56CB5ZCRZ3B15Y+R6YCB55qEY29tbWFuZFxuICAgICAgICB0aGlzLmNvbW1hbmRFbmNvZGVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQ29tbWFuZEVuY29kZXIoKTtcbiAgICAgICAgLy8g5riy5p+TcGFzc+eahOaPj+i/sFxuICAgICAgICBjb25zdCByZW5kZXJQYXNzRGVzYzogR1BVUmVuZGVyUGFzc0Rlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBjb2xvckF0dGFjaG1lbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50OiB0aGlzLnN3YXBDaGFpbi5nZXRDdXJyZW50VGV4dHVyZSgpLmNyZWF0ZVZpZXcoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZFZhbHVlOiB0aGlzLmNsZWFyQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlT3A6IFwic3RvcmVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGRlcHRoU3RlbmNpbEF0dGFjaG1lbnQ6IHtcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50OiB0aGlzLmRlcHRoVGV4dHVyZS5jcmVhdGVWaWV3KCksXG5cbiAgICAgICAgICAgICAgICBkZXB0aExvYWRWYWx1ZTogMS4wLFxuICAgICAgICAgICAgICAgIGRlcHRoU3RvcmVPcDogXCJzdG9yZVwiLFxuICAgICAgICAgICAgICAgIHN0ZW5jaWxMb2FkVmFsdWU6IDAsXG4gICAgICAgICAgICAgICAgc3RlbmNpbFN0b3JlT3A6IFwic3RvcmVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIC8vIPCflozvuI8gRW5jb2RlIGRyYXdpbmcgY29tbWFuZHNcbiAgICAgICAgdGhpcy5yZW5kZXJQYXNzRW5jb2RlciA9IHRoaXMuY29tbWFuZEVuY29kZXIuYmVnaW5SZW5kZXJQYXNzKHJlbmRlclBhc3NEZXNjKTtcbiAgICAgICAgbGV0IGN1cnJlbnRQaXBlbGluZSA9IHRoaXMucGlwZWxpbmVzWzBdO1xuICAgICAgICB0aGlzLnJlbmRlclBhc3NFbmNvZGVyLnNldFBpcGVsaW5lKGN1cnJlbnRQaXBlbGluZS5waXBlbGluZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJQYXNzRW5jb2Rlci5zZXRCaW5kR3JvdXAoMCwgY3VycmVudFBpcGVsaW5lLnVuaWZvcm1CaW5kR3JvdXApO1xuXG4gICAgICAgIHRoaXMucmVuZGVyUGFzc0VuY29kZXIuc2V0Vmlld3BvcnQoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCwgMCwgMSk7XG4gICAgICAgIHRoaXMucmVuZGVyUGFzc0VuY29kZXIuc2V0U2Npc3NvclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFBpcGVsaW5lLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBidWZmZXIgPSBjdXJyZW50UGlwZWxpbmUuYXR0cmlidXRlc1tpXS5idWZmZXI7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclBhc3NFbmNvZGVyLnNldFZlcnRleEJ1ZmZlcihpLCBidWZmZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRQaXBlbGluZS5pbmRleExlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUGFzc0VuY29kZXIuc2V0SW5kZXhCdWZmZXIoY3VycmVudFBpcGVsaW5lLmluZGV4QnVmZmVyKTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXNzRW5jb2Rlci5kcmF3SW5kZXhlZChjdXJyZW50UGlwZWxpbmUuaW5kZXhMZW5ndGgsIDEsIDAsIDAsIDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXNzRW5jb2Rlci5kcmF3KHZlcnROdW0sIDEsIDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJQYXNzRW5jb2Rlci5lbmRQYXNzKCk7XG5cbiAgICAgICAgdGhpcy5kZXZpY2UuZGVmYXVsdFF1ZXVlLnN1Ym1pdChbdGhpcy5jb21tYW5kRW5jb2Rlci5maW5pc2goKV0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFdlYkdQVVJlbmRlckVuZ2luIH0gZnJvbSBcIi4vcmVuZGVyRW5naW5cIjtcbmltcG9ydCB7IGdldEltYWdlRGF0YSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbi8qXG4gKiBAQXV0aG9yOiBob25neHUubGluXG4gKiBARGF0ZTogMjAyMC0wNy0xNSAxNTo0MDoyN1xuICogQExhc3RFZGl0VGltZTogMjAyMC0wNy0yMyAxNTo1OToyM1xuICovXG5leHBvcnQgY2xhc3MgV2ViR1BVUmVuZGVyUGlwZWxpbmUge1xuICAgIGVuZ2luOiBXZWJHUFVSZW5kZXJFbmdpbjtcbiAgICBwaXBlbGluZTogR1BVUmVuZGVyUGlwZWxpbmU7XG4gICAgcGlwZWxpbmVEZXNjOiBHUFVSZW5kZXJQaXBlbGluZURlc2NyaXB0b3I7XG4gICAgY29sb3JTdGF0ZTogR1BVQ29sb3JTdGF0ZURlc2NyaXB0b3I7XG4gICAgdmVydGV4U3RhdGU6IEdQVVZlcnRleFN0YXRlRGVzY3JpcHRvcjtcbiAgICByYXN0ZXJpemF0aW9uU3RhdGU6IEdQVVJhc3Rlcml6YXRpb25TdGF0ZURlc2NyaXB0b3I7XG5cbiAgICBhdHRyaWJ1dGVzOiBBcnJheTxhbnk+ID0gW107XG5cbiAgICB1bmlmb3JtQmluZEdyb3VwOiBHUFVCaW5kR3JvdXA7XG4gICAgdW5pZm9ybUJpbmRHcm91cExheW91dDogR1BVQmluZEdyb3VwTGF5b3V0O1xuXG4gICAgdW5pZm9ybUVudHJpZXM6IE1hcDxudW1iZXIsIGFueT4gPSBuZXcgTWFwPG51bWJlciwgYW55PigpO1xuICAgIGluZGV4QnVmZmVyOiBHUFVCdWZmZXI7XG4gICAgaW5kZXhMZW5ndGg6IG51bWJlcjtcblxuICAgIHZzOiBzdHJpbmc7XG4gICAgZnM6IHN0cmluZztcbiAgICB2ZXJ0TW9kdWxlOiBHUFVTaGFkZXJNb2R1bGU7XG4gICAgZnJhZ01vZHVsZTogR1BVU2hhZGVyTW9kdWxlO1xuXG4gICAgdmVydGV4U3RhZ2U6IGFueTtcbiAgICBmcmFnbWVudFN0YWdlOiBhbnk7XG5cbiAgICBsYXlvdXQ6IEdQVVBpcGVsaW5lTGF5b3V0O1xuXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXZWJHUFVSZW5kZXJFbmdpbiwgdnM6IHN0cmluZywgZnM6IHN0cmluZykge1xuICAgICAgICB0aGlzLmVuZ2luID0gZW5naW5lO1xuICAgICAgICB0aGlzLmVuZ2luLnBpcGVsaW5lcy5wdXNoKHRoaXMpO1xuICAgICAgICB0aGlzLnZzID0gdnM7XG4gICAgICAgIHRoaXMuZnMgPSBmcztcblxuICAgICAgICB0aGlzLnZlcnRNb2R1bGUgPSB0aGlzLmVuZ2luLmRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUoe1xuICAgICAgICAgICAgY29kZTogdGhpcy5lbmdpbi5nbHNsYW5nLmNvbXBpbGVHTFNMKHZzLCBcInZlcnRleFwiLCB0cnVlKSxcblxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgc291cmNlOiB2cyxcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRyYW5zZm9ybTogKHNvdXJjZTogYW55KSA9PiB0aGlzLmVuZ2luLmdsc2xhbmcuY29tcGlsZUdMU0woc291cmNlLCBcInZlcnRleFwiLCB0cnVlKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5mcmFnTW9kdWxlID0gdGhpcy5lbmdpbi5kZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZW5naW4uZ2xzbGFuZy5jb21waWxlR0xTTChmcywgXCJmcmFnbWVudFwiLCB0cnVlKSxcblxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgc291cmNlOiBmcyxcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRyYW5zZm9ybTogKHNvdXJjZTogYW55KSA9PiB0aGlzLmVuZ2luLmdsc2xhbmcuY29tcGlsZUdMU0woc291cmNlLCBcImZyYWdtZW50XCIsIHRydWUpLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVCdWZmZXIoZnJvbVR5cGVkQXJyYXk6IEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDMyQXJyYXksIHVzYWdlOiBHUFVCdWZmZXJVc2FnZSkge1xuICAgICAgICBsZXQgZGVzYyA9IHsgc2l6ZTogZnJvbVR5cGVkQXJyYXkuYnl0ZUxlbmd0aCwgdXNhZ2UgfTtcbiAgICAgICAgbGV0IFtidWZmZXIsIGJ1ZmZlck1hcHBlZF0gPSB0aGlzLmVuZ2luLmRldmljZS5jcmVhdGVCdWZmZXJNYXBwZWQoZGVzYyk7XG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBuZXcgZnJvbVR5cGVkQXJyYXkuY29uc3RydWN0b3IoYnVmZmVyTWFwcGVkKS5zZXQoZnJvbVR5cGVkQXJyYXkpO1xuICAgICAgICBidWZmZXIudW5tYXAoKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG5cbiAgICB1cGRhdGVCdWZmZXIodG86IEdQVUJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGZyb21UeXBlZEFycmF5OiBGbG9hdDMyQXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQzMkFycmF5KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5lbmdpbi5kZXZpY2UuZGVmYXVsdFF1ZXVlLndyaXRlQnVmZmVyKHRvLCBvZmZzZXQsIGZyb21UeXBlZEFycmF5LCAwLCBmcm9tVHlwZWRBcnJheS5ieXRlTGVuZ3RoKTtcbiAgICB9XG5cbiAgICBhZGRBdHRyaWJ1dGUodHlwZWRBcnJheTogRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50MzJBcnJheSwgY29tcG9uZW50U2l6ZTogbnVtYmVyID0gMykge1xuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLmNyZWF0ZUJ1ZmZlcih0eXBlZEFycmF5LCBHUFVCdWZmZXJVc2FnZS5WRVJURVgpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucHVzaCh7IGJ1ZmZlciwgY29tcG9uZW50U2l6ZSB9KTtcbiAgICB9XG5cbiAgICBzZXRJbmRleCh0eXBlZEFycmF5OiBVaW50MTZBcnJheSB8IFVpbnQzMkFycmF5KSB7XG4gICAgICAgIHRoaXMuaW5kZXhCdWZmZXIgPSB0aGlzLmNyZWF0ZUJ1ZmZlcih0eXBlZEFycmF5LCBHUFVCdWZmZXJVc2FnZS5JTkRFWCk7XG4gICAgICAgIHRoaXMuaW5kZXhMZW5ndGggPSB0eXBlZEFycmF5Lmxlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgICAqICBiaW5kaW5nOiAwLFxuICAgICAqICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5WRVJURVgsXG4gICAgICogIHR5cGU6IFwidW5pZm9ybS1idWZmZXJcIixcbiAgICAgKiAgcmVzb3VyY2U6IGJ1ZmZlciB8IHNhbXBsZXIgfCB0ZXh0dXJlVmlld1xuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFdlYkdQVVJlbmRlclBpcGVsaW5lXG4gICAgICovXG4gICAgYWRkVW5pZm9ybUVudHJ5KG9wdGlvbnM6IGFueSkge1xuICAgICAgICB0aGlzLnVuaWZvcm1FbnRyaWVzLnNldChvcHRpb25zLmJpbmRpbmcsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGdldFVuaWZvcm1FbnRyeUJ5QmluZGluZyhrZXk6IG51bWJlcik6IGFueSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1FbnRyaWVzLmdldChrZXkpO1xuICAgIH1cblxuICAgIGFkZFVuaWZvcm1CdWZmZXIodHlwZWRBcnJheTogRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50MzJBcnJheSwgYmluZGluZzogbnVtYmVyID0gMCkge1xuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLmNyZWF0ZUJ1ZmZlcih0eXBlZEFycmF5LCBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QpO1xuICAgICAgICB0aGlzLmFkZFVuaWZvcm1FbnRyeSh7XG4gICAgICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYIHwgR1BVU2hhZGVyU3RhZ2UuRlJBR01FTlQsXG4gICAgICAgICAgICB0eXBlOiBcInVuaWZvcm0tYnVmZmVyXCIsXG4gICAgICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkU2FtcGxlcihiaW5kaW5nOiBudW1iZXIsIG1hZ0ZpbHRlcjogR1BVRmlsdGVyTW9kZSA9IFwibGluZWFyXCIsIG1pbkZpbHRlcjogR1BVRmlsdGVyTW9kZSA9IFwibGluZWFyXCIpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlciA9IHRoaXMuZW5naW4uZGV2aWNlLmNyZWF0ZVNhbXBsZXIoe1xuICAgICAgICAgICAgbWFnRmlsdGVyOiBtYWdGaWx0ZXIsXG4gICAgICAgICAgICBtaW5GaWx0ZXI6IG1pbkZpbHRlcixcbiAgICAgICAgICAgIG1heEFuaXNvdHJvcHk6IDQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkVW5pZm9ybUVudHJ5KHtcbiAgICAgICAgICAgIGJpbmRpbmc6IGJpbmRpbmcsXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5GUkFHTUVOVCxcbiAgICAgICAgICAgIHR5cGU6IFwic2FtcGxlclwiLFxuICAgICAgICAgICAgcmVzb3VyY2U6IHNhbXBsZXIsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFRleHR1cmVWaWV3KGJpbmRpbmc6IG51bWJlciwgdXJsOiBzdHJpbmcsIG5lZWRDb3JzOiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICAvLyDliqDovb3lm77niYdcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChuZWVkQ29ycykge1xuICAgICAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcbiAgICAgICAgfVxuICAgICAgICBpbWcuc3JjID0gdXJsO1xuICAgICAgICBhd2FpdCBpbWcuZGVjb2RlKCk7XG5cbiAgICAgICAgLy8g5Yib5bu6R1BVVGV4dHVyZVxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5lbmdpbi5kZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGltZy53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGltZy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgZGVwdGg6IDEsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9ybWF0OiBcInJnYmE4dW5vcm1cIixcbiAgICAgICAgICAgIHVzYWdlOiBHUFVUZXh0dXJlVXNhZ2UuQ09QWV9EU1QgfCBHUFVUZXh0dXJlVXNhZ2UuU0FNUExFRCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdGV4dHVyZURhdGEgPSBnZXRJbWFnZURhdGEoaW1nKTtcblxuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmVuZ2luLmRldmljZS5kZWZhdWx0UXVldWUud3JpdGVUZXh0dXJlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5lbmdpbi5kZXZpY2UuZGVmYXVsdFF1ZXVlLndyaXRlVGV4dHVyZSh7IHRleHR1cmUgfSwgdGV4dHVyZURhdGEsIHsgYnl0ZXNQZXJSb3c6IGltZy53aWR0aCAqIDQgfSwgW1xuICAgICAgICAgICAgICAgIGltZy53aWR0aCxcbiAgICAgICAgICAgICAgICBpbWcuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSBlbHNlIGlmIChjcmVhdGVJbWFnZUJpdG1hcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyDnlJ/miJBiaXRtYXBcbiAgICAgICAgICAgIGNvbnN0IGJpdG1hcCA9IGF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKGltZyk7XG5cbiAgICAgICAgICAgIC8vIOiuvue9rmNvcHnnmoTmupBcbiAgICAgICAgICAgIGxldCBzb3VyY2U6IEdQVUltYWdlQml0bWFwQ29weVZpZXcgPSB7IGltYWdlQml0bWFwOiBiaXRtYXAgfTtcbiAgICAgICAgICAgIC8vIOiuvue9rmNvcHnliLDnmoTlnLDmlrlcbiAgICAgICAgICAgIGxldCBkZXN0aW5hdGlvbjogR1BVVGV4dHVyZUNvcHlWaWV3ID0geyB0ZXh0dXJlOiB0ZXh0dXJlIH07XG4gICAgICAgICAgICAvLyDorr7nva5jb3B555qE5bC65a+4XG4gICAgICAgICAgICBsZXQgY29weVNpemU6IEdQVUV4dGVudDNEID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBpbWcud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBpbWcuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGRlcHRoOiAxLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIOaJp+ihjGNvcHnmk43kvZxcbiAgICAgICAgICAgIHRoaXMuZW5naW4uZGV2aWNlLmRlZmF1bHRRdWV1ZS5jb3B5SW1hZ2VCaXRtYXBUb1RleHR1cmUoc291cmNlLCBkZXN0aW5hdGlvbiwgY29weVNpemUpO1xuICAgICAgICAgICAgLy8g6YeK5pS+Yml0bWFw5pWw5o2uXG4gICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IEZhbGxiYWNrIHVudGlsIFF1ZXVlLndyaXRlVGV4dHVyZSBpcyBpbXBsZW1lbnRlZC5cbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVEYXRhQnVmZmVyID0gdGhpcy5lbmdpbi5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICAgICAgICBzaXplOiB0ZXh0dXJlRGF0YS5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfU1JDLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgIHRoaXMuZW5naW4uZGV2aWNlLmRlZmF1bHRRdWV1ZS53cml0ZUJ1ZmZlcih0ZXh0dXJlRGF0YUJ1ZmZlciwgMCwgdGV4dHVyZURhdGEpO1xuXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlTG9hZEVuY29kZXIgPSB0aGlzLmVuZ2luLmRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuICAgICAgICAgICAgdGV4dHVyZUxvYWRFbmNvZGVyLmNvcHlCdWZmZXJUb1RleHR1cmUoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHRleHR1cmVEYXRhQnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNQZXJSb3c6IGltZy53aWR0aCAqIDQsXG4gICAgICAgICAgICAgICAgICAgIGltYWdlSGVpZ2h0OiBpbWcuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW2ltZy53aWR0aCwgaW1nLmhlaWdodCwgMV1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMuZW5naW4uZGV2aWNlLmRlZmF1bHRRdWV1ZS5zdWJtaXQoW3RleHR1cmVMb2FkRW5jb2Rlci5maW5pc2goKV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGRVbmlmb3JtRW50cnkoe1xuICAgICAgICAgICAgYmluZGluZzogYmluZGluZyxcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULFxuICAgICAgICAgICAgdHlwZTogXCJzYW1wbGVkLXRleHR1cmVcIixcbiAgICAgICAgICAgIHJlc291cmNlOiB0ZXh0dXJlLmNyZWF0ZVZpZXcoKSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVVbmlmb3JtcygpIHtcbiAgICAgICAgY29uc3QgYmluZEdyb3VwTGF5b3V0RGVzOiBhbnkgPSB7IGVudHJpZXM6IFtdIH07XG4gICAgICAgIGNvbnN0IGJpbmRHcm91cEVudHJpZXM6IEFycmF5PGFueT4gPSBbXTtcbiAgICAgICAgdGhpcy51bmlmb3JtRW50cmllcy5mb3JFYWNoKChlbnRyeSwga2V5KSA9PiB7XG4gICAgICAgICAgICBiaW5kR3JvdXBMYXlvdXREZXMuZW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBiaW5kaW5nOiBlbnRyeS5iaW5kaW5nLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IGVudHJ5LnZpc2liaWxpdHksXG4gICAgICAgICAgICAgICAgdHlwZTogZW50cnkudHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmluZEdyb3VwRW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBiaW5kaW5nOiBlbnRyeS5iaW5kaW5nLFxuICAgICAgICAgICAgICAgIHJlc291cmNlOiBlbnRyeS5yZXNvdXJjZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVuaWZvcm1CaW5kR3JvdXBMYXlvdXQgPSB0aGlzLmVuZ2luLmRldmljZS5jcmVhdGVCaW5kR3JvdXBMYXlvdXQoYmluZEdyb3VwTGF5b3V0RGVzKTtcbiAgICAgICAgdGhpcy51bmlmb3JtQmluZEdyb3VwID0gdGhpcy5lbmdpbi5kZXZpY2UuY3JlYXRlQmluZEdyb3VwKHtcbiAgICAgICAgICAgIGxheW91dDogdGhpcy51bmlmb3JtQmluZEdyb3VwTGF5b3V0LFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgZW50cmllczogYmluZEdyb3VwRW50cmllcyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVQaXBsaW5lKCkge1xuICAgICAgICB0aGlzLmdlbmVyYXRlVW5pZm9ybXMoKTtcbiAgICAgICAgLy8g8J+Wje+4jyBTaGFkZXIgTW9kdWxlc1xuICAgICAgICB0aGlzLnZlcnRleFN0YWdlID0ge1xuICAgICAgICAgICAgbW9kdWxlOiB0aGlzLnZlcnRNb2R1bGUsXG4gICAgICAgICAgICBlbnRyeVBvaW50OiBcIm1haW5cIixcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmZyYWdtZW50U3RhZ2UgPSB7XG4gICAgICAgICAgICBtb2R1bGU6IHRoaXMuZnJhZ01vZHVsZSxcbiAgICAgICAgICAgIGVudHJ5UG9pbnQ6IFwibWFpblwiLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIPCfjaUgQmxlbmQgU3RhdGVcbiAgICAgICAgdGhpcy5jb2xvclN0YXRlID0ge1xuICAgICAgICAgICAgZm9ybWF0OiBcImJncmE4dW5vcm1cIixcbiAgICAgICAgICAgIC8vIGFscGhhQmxlbmQ6IHtcbiAgICAgICAgICAgIC8vICAgICBzcmNGYWN0b3I6IFwic3JjLWFscGhhXCIsXG4gICAgICAgICAgICAvLyAgICAgZHN0RmFjdG9yOiBcIm9uZS1taW51cy1zcmMtYWxwaGFcIixcbiAgICAgICAgICAgIC8vICAgICBvcGVyYXRpb246IFwiYWRkXCIsXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICAgICAgY29sb3JCbGVuZDoge1xuICAgICAgICAgICAgICAgIHNyY0ZhY3RvcjogXCJzcmMtYWxwaGFcIixcbiAgICAgICAgICAgICAgICBkc3RGYWN0b3I6IFwib25lLW1pbnVzLXNyYy1hbHBoYVwiLFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJhZGRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3cml0ZU1hc2s6IEdQVUNvbG9yV3JpdGUuQUxMLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIPCflLogUmFzdGVyaXphdGlvblxuICAgICAgICB0aGlzLnJhc3Rlcml6YXRpb25TdGF0ZSA9IHtcbiAgICAgICAgICAgIC8vIGZyb250RmFjZTogXCJjd1wiLFxuICAgICAgICAgICAgLy8gY3VsbE1vZGU6IFwiYmFja1wiLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIPCfkr4gVW5pZm9ybSBEYXRhXG4gICAgICAgIHRoaXMubGF5b3V0ID0gdGhpcy5lbmdpbi5kZXZpY2UuY3JlYXRlUGlwZWxpbmVMYXlvdXQoe1xuICAgICAgICAgICAgYmluZEdyb3VwTGF5b3V0czogW3RoaXMudW5pZm9ybUJpbmRHcm91cExheW91dF0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudmVydGV4U3RhdGUgPSB7XG4gICAgICAgICAgICBpbmRleEZvcm1hdDogXCJ1aW50MTZcIixcbiAgICAgICAgICAgIHZlcnRleEJ1ZmZlcnM6IHRoaXMuZ2V0VmVydGV4QnVmZmVyRGVzYygpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGlwZWxpbmVEZXNjID0ge1xuICAgICAgICAgICAgbGF5b3V0OiB0aGlzLmxheW91dCxcbiAgICAgICAgICAgIHZlcnRleFN0YWdlOiB0aGlzLnZlcnRleFN0YWdlLFxuICAgICAgICAgICAgZnJhZ21lbnRTdGFnZTogdGhpcy5mcmFnbWVudFN0YWdlLFxuICAgICAgICAgICAgcHJpbWl0aXZlVG9wb2xvZ3k6IFwidHJpYW5nbGUtbGlzdFwiLFxuICAgICAgICAgICAgY29sb3JTdGF0ZXM6IFt0aGlzLmNvbG9yU3RhdGVdLFxuICAgICAgICAgICAgdmVydGV4U3RhdGU6IHRoaXMudmVydGV4U3RhdGUsXG4gICAgICAgICAgICBkZXB0aFN0ZW5jaWxTdGF0ZToge1xuICAgICAgICAgICAgICAgIGRlcHRoV3JpdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRlcHRoQ29tcGFyZTogXCJsZXNzXCIsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBcImRlcHRoMjRwbHVzLXN0ZW5jaWw4XCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmFzdGVyaXphdGlvblN0YXRlOiB0aGlzLnJhc3Rlcml6YXRpb25TdGF0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5waXBlbGluZSA9IHRoaXMuZW5naW4uZGV2aWNlLmNyZWF0ZVJlbmRlclBpcGVsaW5lKHRoaXMucGlwZWxpbmVEZXNjKTtcbiAgICB9XG5cbiAgICBnZXRWZXJ0ZXhCdWZmZXJEZXNjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckRlc2M6IEdQVVZlcnRleEJ1ZmZlckxheW91dERlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogaW5kZXgsIC8vIFtbYXR0cmlidXRlKGluZGV4KV1dXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IGBmbG9hdCR7aXRlbS5jb21wb25lbnRTaXplfWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBhcnJheVN0cmlkZTogNCAqIGl0ZW0uY29tcG9uZW50U2l6ZSwgLy8gc2l6ZW9mKGZsb2F0KSAqIDNcbiAgICAgICAgICAgICAgICBzdGVwTW9kZTogXCJ2ZXJ0ZXhcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyRGVzYztcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiLypcbiAqIEBBdXRob3I6IGhvbmd4dS5saW5cbiAqIEBEYXRlOiAyMDIwLTA3LTAyIDE0OjQwOjE1XG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA3LTIwIDE3OjAyOjI0XG4gKi9cblxuaW1wb3J0IHsgbWF0NCwgdmVjMyB9IGZyb20gXCJnbC1tYXRyaXhcIjtcbmltcG9ydCB7IFdlYkdQVVJlbmRlckVuZ2luIH0gZnJvbSBcIi4uLy4uL2VuZ2luZS9yZW5kZXJFbmdpblwiO1xuaW1wb3J0IHsgV2ViR1BVUmVuZGVyUGlwZWxpbmUgfSBmcm9tIFwiLi4vLi4vZW5naW5lL3BpcGxpbmVcIjtcblxuaW1wb3J0IFwiLi4vLi4vc3R5bGUubGVzc1wiO1xuaW1wb3J0IHsgZnMsIHZzIH0gZnJvbSBcIi4vc2hhZGVyXCI7XG5pbXBvcnQgeyBwb3NpdGlvbnMsIG5vcm1hbHMsIGluZGljZXMgfSBmcm9tIFwiLi9kYXRhXCI7XG5cbmNvbnN0IHJlbmRlckVuZ2luZTogV2ViR1BVUmVuZGVyRW5naW4gPSBuZXcgV2ViR1BVUmVuZGVyRW5naW4oXCJyZW5kZXJDYW52YXNcIik7XG5cbmNvbnN0IHByb2plY3Rpb25NdHJpeCA9IG1hdDQucGVyc3BlY3RpdmUoXG4gICAgbWF0NC5jcmVhdGUoKSxcbiAgICBNYXRoLlBJIC8gMy41LFxuICAgIHJlbmRlckVuZ2luZS5jYW52YXMud2lkdGggLyByZW5kZXJFbmdpbmUuY2FudmFzLmhlaWdodCxcbiAgICAwLjAxLFxuICAgIDEwMDAwXG4pO1xuXG5jb25zdCB2aWV3TWF0cml4ID0gbWF0NC5sb29rQXQoXG4gICAgbWF0NC5jcmVhdGUoKSxcbiAgICB2ZWMzLmZyb21WYWx1ZXMoMCwgMTAsIDIwMCksXG4gICAgdmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApLFxuICAgIHZlYzMuZnJvbVZhbHVlcygwLCAxLCAwKVxuKTtcblxuY29uc3QgbW9kZWxNYXRyaXggPSBtYXQ0LmZyb21UcmFuc2xhdGlvbihcbiAgICBtYXQ0LmNyZWF0ZSgpLFxuICAgIHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKVxuKTtcbmNvbnN0IG12TWF0cml4ID0gbWF0NC5tdWwobWF0NC5jcmVhdGUoKSwgbW9kZWxNYXRyaXgsIHZpZXdNYXRyaXgpO1xuXG5jb25zdCBtYXRyaXhBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMzIpO1xubWF0cml4QXJyYXkuc2V0KHByb2plY3Rpb25NdHJpeCk7XG5tYXRyaXhBcnJheS5zZXQobXZNYXRyaXgsIDE2KTtcblxubGV0IHBpcGxpbmU6IFdlYkdQVVJlbmRlclBpcGVsaW5lID0gbnVsbDtcbmNvbnN0IGluaXQgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZW5naW5lUmVhZHkgPSBhd2FpdCByZW5kZXJFbmdpbmUuaW5pdCgpO1xuICAgIGlmIChlbmdpbmVSZWFkeSkge1xuICAgICAgICBwaXBsaW5lID0gbmV3IFdlYkdQVVJlbmRlclBpcGVsaW5lKHJlbmRlckVuZ2luZSwgdnMsIGZzKTtcbiAgICAgICAgcGlwbGluZS5hZGRBdHRyaWJ1dGUocG9zaXRpb25zKTtcbiAgICAgICAgcGlwbGluZS5hZGRBdHRyaWJ1dGUobm9ybWFscyk7XG4gICAgICAgIHBpcGxpbmUuc2V0SW5kZXgoaW5kaWNlcyk7XG4gICAgICAgIHBpcGxpbmUuYWRkVW5pZm9ybUJ1ZmZlcihtYXRyaXhBcnJheSk7XG4gICAgICAgIHBpcGxpbmUuZ2VuZXJhdGVQaXBsaW5lKCk7XG4gICAgICAgIHJlbmRlcigpO1xuICAgIH1cbn07XG5cbmNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICBsZXQgYnVmZmVyID0gcGlwbGluZS5nZXRVbmlmb3JtRW50cnlCeUJpbmRpbmcoMCkucmVzb3VyY2VcbiAgICAgICAgLmJ1ZmZlciBhcyBHUFVCdWZmZXI7XG4gICAgcGlwbGluZS51cGRhdGVCdWZmZXIoYnVmZmVyLCAwLCBnZXRSb3RhdGVNYXRyaXgoKSk7XG4gICAgcmVuZGVyRW5naW5lLmRyYXcoKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbn07XG5cbmNvbnN0IGdldFJvdGF0ZU1hdHJpeCA9ICgpID0+IHtcbiAgICBtYXQ0LmZyb21Sb3RhdGlvbihcbiAgICAgICAgbW9kZWxNYXRyaXgsXG4gICAgICAgIDAuMDAwNSAqIG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgICB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMClcbiAgICApO1xuICAgIG1hdDQubXVsKG12TWF0cml4LCB2aWV3TWF0cml4LCBtb2RlbE1hdHJpeCk7XG4gICAgbWF0cml4QXJyYXkuc2V0KHByb2plY3Rpb25NdHJpeCk7XG4gICAgbWF0cml4QXJyYXkuc2V0KG12TWF0cml4LCAxNik7XG4gICAgcmV0dXJuIG1hdHJpeEFycmF5O1xufTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGluaXQpO1xuIiwiLypcbiAqIEBBdXRob3I6IGhvbmd4dS5saW5cbiAqIEBEYXRlOiAyMDIwLTA3LTIwIDE2OjQ0OjExXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA3LTIwIDE3OjAwOjA1XG4gKi9cblxuY29uc3QgdnMgPSBgI3ZlcnNpb24gNDUwXG5sYXlvdXQoc2V0ID0gMCwgYmluZGluZyA9IDApIHVuaWZvcm0gVW5pZm9ybXMge1xuICAgIG1hdDQgdVByb2plY3Rpb25NYXRyaXg7XG4gICAgbWF0NCB1TW9kZWxWaWV3TWF0cml4O1xufTtcblxubGF5b3V0KGxvY2F0aW9uID0gMCkgaW4gdmVjMyBhUG9zaXRpb247XG5sYXlvdXQobG9jYXRpb24gPSAxKSBpbiB2ZWMzIGFOb3JtYWw7XG5cbmxheW91dChsb2NhdGlvbiA9IDApIG91dCB2ZWMzIHZOb3JtYWw7XG5sYXlvdXQobG9jYXRpb24gPSAxKSBvdXQgdmVjNCB2UG9zaXRpb247XG52b2lkIG1haW4oKSB7XG4gICAgZ2xfUG9zaXRpb24gPSB1UHJvamVjdGlvbk1hdHJpeCAqIHVNb2RlbFZpZXdNYXRyaXggKiB2ZWM0KGFQb3NpdGlvbiwgMS4wKTtcbiAgICB2Tm9ybWFsID0gYU5vcm1hbDtcbiAgICB2UG9zaXRpb24gPSBnbF9Qb3NpdGlvbjtcbn1gO1xuXG5jb25zdCBmcyA9IGAjdmVyc2lvbiA0NTBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7IFxuICAgIGxheW91dChsb2NhdGlvbj0wKSBpbiB2ZWMzIHZOb3JtYWw7XG4gICAgbGF5b3V0KGxvY2F0aW9uPTEpIGluIHZlYzQgdlBvc2l0aW9uO1xuICAgIGxheW91dChsb2NhdGlvbj0wKSBvdXQgdmVjNCBmcmFnQ29sb3I7XG4gICAgXG5cbiAgICB2b2lkIG1haW4oKXsgXG4gICAgICAgIC8v5YWJ6ZSl6KeS5bqm55qEY29z5YC8IFxuICAgIC8v5ZyoanPkuK3kvb/nlKhtYXRoLmNvcyjluqbmlbApIOS9v+eUqHVuaWZvcm3lj5jph4/kvKDlhaXkuZ/lj69cbiAgICBmbG9hdCBsb3dlckxpbWl0PSAwLjk1O1xuICAgIGZsb2F0IHVwcGVyTGltaXQgPSAwLjk1ICogMS4wMjtcbiAgICB2ZWM0IGNvbG9yID0gdmVjNCgxLCAwLjcsIDAuNSwgMSk7ICAvLyDmqKHlnovpopzoibJcbiAgICB2ZWMzIGxpZ2h0Q29sb3IgPSB2ZWMzKDAuMSwgMSwgMSk7IC8v5YWJ5rqQ6aKc6ImyXG4gICAgdmVjMyBub3JtYWwgPSBub3JtYWxpemUodk5vcm1hbCk7IC8v5rOV5ZCR6YePIFxuICAgIHZlYzMgbGlnaHRQb3NpdGlvbiA9IHZlYzMoMjUsMjUsMzApOy8v5YWJ5rqQ5L2N572uIFxuICAgIHZlYzMgbGlnaHREaXIgPSBub3JtYWxpemUodmVjMygwLDAsMSkpOyAvL+WFiea6kOaWueWQkVxuICAgIC8vXG4gICAgdmVjMyBzdXJmYWNlV29ybGRQb3NpdGlvbiA9IHZQb3NpdGlvbi54eXo7IC8vICh1X21vZGVsTWF0cml4ICogdl9wb3NpdGlvbikueHl6O1xuICAgIHZlYzMgc3VyZmFjZTJsaWdodCA9IG5vcm1hbGl6ZShsaWdodFBvc2l0aW9uIC0gc3VyZmFjZVdvcmxkUG9zaXRpb24pOy8v6Z2i5Yiw5YWJ5rqQ5pa55ZCRXG4gICAgZmxvYXQgZG90RnJvbURpcmVjdGlvbiA9IGRvdChzdXJmYWNlMmxpZ2h0LCAtbGlnaHREaXIpOyAgXG4gICAgLy/liKTmlq3ngrnkuZjlkI7nmoTnu5PmnpzmmK/kuI3mmK/lpKfkuo7pmZDlrprlgLwg5bm25bmz5ruR5o+S5YC8XG4gICAgZmxvYXQgaW5MaWdodCA9IHNtb290aHN0ZXAobG93ZXJMaW1pdCwgdXBwZXJMaW1pdCwgZG90RnJvbURpcmVjdGlvbik7Ly/lubPmu5Hov4fmuKFcbiAgICBmbG9hdCBjb3NUaGV0YSA9IG1heChkb3Qobm9ybWFsLCBzdXJmYWNlMmxpZ2h0KSwwLjApOyAvLyDorqHnrpfpnaLliLDlhYnmupDlkJHph4/kuI7ms5XlkJHph4/lpLnop5LnmoRjb3PlgLxcbiAgICB2ZWMzIGRpZmZ1c2UgPSBsaWdodENvbG9yICogdmVjMyhjb2xvcikgKiBpbkxpZ2h0ICogIGNvc1RoZXRhO1xuICAgICAgICBmcmFnQ29sb3IgID0gdmVjNChkaWZmdXNlLGNvbG9yLmEpO1xuICAgIH1cbmA7XG5cbmV4cG9ydCB7IGZzLCB2cyB9O1xuIiwiLypcbiAqIEBBdXRob3I6IGhvbmd4dS5saW5cbiAqIEBEYXRlOiAyMDIwLTA3LTIwIDE2OjQ0OjA1XG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA3LTIwIDE3OjAxOjU5XG4gKi9cblxuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCBwb3NpdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgNTAsLTUwLDAuMCxcbiAgLTUwLC01MCwwLjAsXG4gIC01MCw1MCwwLjAsXG4gIDUwLDUwLDAuMCxcbl0pO1xuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCBub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgLTEsIDAsIDAsIC0xLCAwLCAwLCAtMSwgMCwgMCwgLTFdKTtcbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShbMCwgMiwgMSwgMCwgMywgMl0pO1xuXG5leHBvcnQgeyBwb3NpdGlvbnMsIG5vcm1hbHMsIGluZGljZXMgfTtcbiIsIi8qXG4gKiBAQXV0aG9yOiBob25neHUubGluXG4gKiBARGF0ZTogMjAyMC0wNy0yMiAyMzoxNzoxNFxuICogQExhc3RFZGl0VGltZTogMjAyMC0wNy0yMiAyMzoyODoyNFxuICovXG5cbmNvbnN0IGdldEltYWdlRGF0YSA9IChpbWc6IEhUTUxJbWFnZUVsZW1lbnQpID0+IHtcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApO1xuICAgIHJldHVybiBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCkuZGF0YTtcbn07XG5cbmV4cG9ydCB7IGdldEltYWdlRGF0YSB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==